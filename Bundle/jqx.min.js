var{IS:a,maybe:ee,$Wrap:fr,xProxy:dr,isNothing:mr}=lt();function lt(){Symbol.proxy=Symbol.for("toa.proxy"),Symbol.is=Symbol.for("toa.is"),Symbol.type=Symbol.for("toa.type"),Symbol.isSymbol=Symbol.for("toa.isASymbol"),f();let t=b(),[e,r]=[m(),A()];return r.custom(),{IS:n,maybe:t,$Wrap:e,isNothing:g,xProxy:r};function n(i,...l){if(t({trial:d=>"isTypes"in(l?.[0]??{})})){let d=l[0];return"defaultValue"in d?S(i,d):"notTypes"in d?p(i,d):n(i,...[d.isTypes].flat())}let u=typeof i=="symbol"?Symbol.isSymbol:i;return l.length>1?L(u,...l):s(i,...l)}function o(i){return i?.[Symbol.proxy]??n(i)}function s(i,...l){let{noInput:u,noShouldbe:d,compareTo:w,inputCTOR:H,isNaN:j,isInfinity:k,shouldBeFirstElementIsNothing:J}=x(i,...l);switch(l=l.length&&l[0],!0){case J:return String(i)===String(w);case(i?.[Symbol.proxy]&&d):return i[Symbol.proxy];case j:return d?"NaN":t({trial:Q=>String(w)})===String(i);case k:return d?"Infinity":t({trial:Q=>String(w)})===String(i);case u:return d?String(i):String(w)===String(i);case H===Boolean:return l?H===l:"Boolean";default:return h(i,l,d,c(i,H))}}function c(i,l){return i===0?Number:i===""?String:i?l:{name:String(i)}}function x(i,...l){let u=l.length<1,d=!u&&l[0],w=!u&&g(l[0]),H=i==null,j=!H&&Object.getPrototypeOf(i)?.constructor,k=t({trial:Q=>String(i)})==="NaN",J=t({trial:Q=>String(i)})==="Infinity";return{noInput:H,noShouldbe:u,compareTo:d,inputCTOR:j,isNaN:k,isInfinity:J,shouldBeFirstElementIsNothing:w}}function h(i,l,u,d){switch(!0){case(!u&&l===i||i?.[Symbol.proxy]&&l===Proxy):return!0;case t({trial:w=>String(l)})==="NaN":return String(i)==="NaN";case(i?.[Symbol.toStringTag]&&n(l,String)):return String(l)===i[Symbol.toStringTag];default:return l?t({trial:w=>i instanceof l})||l===d||l===Object.getPrototypeOf(d)||`${l?.name}`===d?.name:i?.[Symbol.toStringTag]&&`[object ${i?.[Symbol.toStringTag]}]`||d?.name||String(d)}}function L(i,...l){return l.some(u=>n(i,u))}function g(i,l=!1){let u=i==null;return u=l?u||n(i,1/0)||n(i,NaN):u,u}function b(){let i=(l,u)=>l?.constructor===Function?l(u):void 0;return function({trial:l,whenError:u=()=>{}}={}){try{return i(l)}catch(d){return i(u,d)}}}function m(){return function(i){return Object.freeze({get value(){return i},get[Symbol.type](){return o(i)},get type(){return o(i)},[Symbol.is](...l){return n(i,...l)},is(...l){return n(i,...l)}})}}function S(i,{defaultValue:l,isTypes:u=[void 0],notTypes:d}={}){return u=u?.constructor!==Array?[u]:u,d=d&&d?.constructor!==Array?[d]:[],d.length<1?n(i,...u)?i:l:p(i,{isTypes:u,notTypes:d})?i:l}function p(i,{isTypes:l=[void 0],notTypes:u=[void 0]}={}){return l=l?.constructor!==Array?[l]:l,u=u?.constructor!==Array?[u]:u,n(i,...l)&&!n(i,...u)}function f(){Object.getOwnPropertyDescriptors(Object.prototype)[Symbol.is]||(Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return o(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...i){return n(this,...i)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(i){return o(i)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(i,...l){return n(i,...l)},enumerable:!1,configurable:!1}}))}function y(i){let l=String(Object.getPrototypeOf(i)?.constructor);return l.slice(l.indexOf("ion")+3,l.indexOf("(")).trim()}function v(i){let l=i.set;return i.set=(u,d,w)=>d===Symbol.proxy?u[d]=w:l(u,d,w),i}function A(){let i=Proxy;return{native(){Proxy=i},custom(){Proxy=new i(i,{construct(l,u){for(let w of u)w.set&&(w=v(w));let d=new l(...u);return d[Symbol.proxy]=`Proxy (${y(u[0])})`,d}})}}}}var Ie=ct(),W=st(),V=at();function st(){return{html:Object.freeze("accept,action,align,alt,autocapitalize,autocomplete,autopictureinpicture,autoplay,background,bgcolor,border,capture,cellpadding,cellspacing,checked,cite,class,clear,contenteditable,color,cols,colspan,controls,controlslist,coords,crossorigin,datetime,decoding,default,dir,disabled,disablepictureinpicture,disableremoteplayback,download,draggable,enctype,enterkeyhint,face,for,headers,height,hidden,high,href,hreflang,id,inputmode,integrity,is,ismap,kind,label,lang,list,loading,loop,low,max,maxlength,media,method,min,minlength,multiple,muted,name,nonce,noshade,novalidate,nowrap,open,optimum,pattern,placeholder,playsinline,poster,preload,pubdate,radiogroup,readonly,rel,required,rev,reversed,role,rows,rowspan,spellcheck,scope,selected,shape,size,sizes,span,srclang,start,src,srcset,step,style,summary,tabindex,target,title,translate,type,usemap,valign,value,width,xmlns,slot".split(",")),svg:Object.freeze("accent-height,accumulate,additive,alignment-baseline,ascent,attributename,attributetype,azimuth,basefrequency,baseline-shift,begin,bias,by,class,clip,clippathunits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,cx,cy,d,dx,dy,diffuseconstant,direction,display,divisor,dur,edgemode,elevation,end,fill,fill-opacity,fill-rule,filter,filterunits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,fx,fy,g1,g2,glyph-name,glyphref,gradientunits,gradienttransform,height,href,id,image-rendering,in,in2,k,k1,k2,k3,k4,kerning,keypoints,keysplines,keytimes,lang,lengthadjust,letter-spacing,kernelmatrix,kernelunitlength,lighting-color,local,marker-end,marker-mid,marker-start,markerheight,markerunits,markerwidth,maskcontentunits,maskunits,max,mask,media,method,mode,min,name,numoctaves,offset,operator,opacity,order,orient,orientation,origin,overflow,paint-order,path,pathlength,patterncontentunits,patterntransform,patternunits,points,preservealpha,preserveaspectratio,primitiveunits,r,rx,ry,radius,refx,refy,repeatcount,repeatdur,restart,result,rotate,scale,seed,shape-rendering,specularconstant,specularexponent,spreadmethod,startoffset,stddeviation,stitchtiles,stop-color,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke,stroke-width,style,surfacescale,systemlanguage,tabindex,targetx,targety,transform,text-anchor,text-decoration,text-rendering,textlength,type,u1,u2,unicode,values,viewbox,visibility,version,vert-adv-y,vert-origin-x,vert-origin-y,width,word-spacing,wrap,writing-mode,xchannelselector,ychannelselector,x,x1,x2,xmlns,y,y1,y2,z,zoomandpan".split(","))}}function at(){return{a:!0,area:!0,audio:!1,br:!0,base:!0,body:!0,button:!0,canvas:!0,comment:!0,dl:!0,data:!0,datalist:!0,div:!0,em:!0,embed:!1,fieldset:!0,font:!0,footer:!0,form:!1,hr:!0,head:!0,header:!0,output:!0,iframe:!1,frameset:!1,img:!0,input:!0,li:!0,label:!0,legend:!0,link:!0,map:!0,mark:!0,menu:!0,media:!0,meta:!0,nav:!0,meter:!0,ol:!0,object:!1,optgroup:!0,option:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!1,quote:!0,script:!1,select:!0,source:!0,span:!0,style:!0,caption:!0,td:!0,col:!0,table:!0,tr:!0,template:!1,textarea:!0,time:!0,title:!0,track:!0,details:!0,ul:!0,video:!0,del:!0,ins:!0,slot:!0,blockquote:!0,svg:!0,dialog:!0,summary:!0,main:!0,address:!0,colgroup:!0,tbody:!0,tfoot:!0,thead:!0,th:!0,dd:!0,dt:!0,figcaption:!0,figure:!0,i:!0,b:!0,code:!0,h1:!0,h2:!0,h3:!0,h4:!0,abbr:!0,bdo:!0,dfn:!0,kbd:!0,q:!0,rb:!0,rp:!0,rt:!0,ruby:!0,s:!0,strike:!0,samp:!0,small:!0,strong:!0,sup:!0,sub:!0,u:!0,var:!0,wbr:!0,nobr:!0,tt:!0,noscript:!0}}function ct(){return["::backdrop{background-color:grey;opacity:0.2;}",`#jqxPopup{overflow:hidden;background-color:transparent;outline:none;border:none;inset:0;animation:fade-out 0.5s ease-out;&[open]{display:flex;align-items:center;justify-content:center;animation:fade-in 0.5s ease;}#jqxPopupContent{background-color:white;border:solid 1px #eee;box-shadow:1px 2px 8px #999;border-radius:4px;padding:12px;vertical-align:middle;max-height:40vh;max-width:50vw;overflow:auto;margin:0 auto;div:not(#closeHandleIcon){clear:both;}@media (width <= 640px){max-width:80vw;max-height:60vh;}#closeHandleIcon{cursor:pointer;width:24px;height:24px;display:inline;position:absolute;top:4px;right:4px;justify-content:right;background-image:url("data:image/svg+xml;utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22iso-8859-1%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20id%3D%22Layer_1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20128%20128%22%20style%3D%22enable-background%3Anew%200%200%20128%20128%3B%22%20xml%3Aspace%3D%22preserve%22%3E%3Crect%20x%3D%22-368%22%20y%3D%226%22%20style%3D%22display%3Anone%3Bfill%3A%23E0E0E0%3B%22%20width%3D%22866%22%20height%3D%221018%22%2F%3E%3Ccircle%20style%3D%22fill%3A%23FFFFFF%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Ccircle%20style%3D%22fill%3A%238CCFB9%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2239%22%2F%3E%3Ccircle%20style%3D%22fill%3Anone%3Bstroke%3A%23444B54%3Bstroke-width%3A6%3Bstroke-miterlimit%3A10%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Cpolyline%20style%3D%22fill%3Anone%3Bstroke%3A%23FFFFFF%3Bstroke-width%3A6%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%3B%22%20points%3D%2242%2C69%2055.55%2C81%20%20%2086%2C46%20%22%2F%3E%3C%2Fsvg%3E");@media (width <= 640px){background-image:none;position:relative;margin:-15px -15px 4px 0;float:right;vertical-align:middle;border:1px solid #AAA;padding:2px;border-radius:50%;width:12px;height:12px;font-size:12px;line-height:12px;font-weight:bold;text-align:center;&:after{content:'\\2714';color:green;}}}.warn{display:none;text-align:center;color:red;border-top:1px solid #999;margin-top:1em;padding-top:3px;animation:warn-fade-out 0.2s ease-out;}.warn.active{opacity:1;display:block;animation:warn-fade-in 0.2s ease-in;}}}`,"@keyframes fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1, 1);display:flex;}}","@keyframes fade-out{0%{opacity:1;transform:scale(1, 1);display:flex;}100%{opacity:0;transform:scale(0, 0);display:none;}}","@keyframes warn-fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1,1 );display:block;}}","@keyframes warn-fade-out{0%{opacity:1;transform:scale(1, 1);display:block;}100%{opacity:0;transform:scale(0, 0);display:none;}}"]}var Re={html:"innerHTML",text:"textContent",class:"className"},te=ut();function ut(){let t={get(e,r){let n=String(r)?.toLowerCase();switch(!0){case n in e:return e[n];case St(n):return je(e,n,r);default:return je(e,n,r,!0)}},enumerable:!1,configurable:!1};return new Proxy({},t)}function je(t,e,r,n=!1){return Object.defineProperty(t,e,{get(){return n?o=>ht(r):xt(e)}}),t[e]}function ft(t,e,r){return e=e?.isJQx&&e.first()||e,ee({trial:n=>bt(e)?t.append(e):Je(e)?t.insertAdjacentHTML("beforeend",e):t.append(e),whenError:n=>console.info(`${r} (for root ${t}) not created, reason
`,n)})}function dt(t,e,...r){let n=mt(e,t);return r?.forEach(o=>ft(n,o,t)),n}function mt(t,e){switch(t=ve(e)?yt(t):t?.isJQx?t.first():t,!0){case a(t,String):return _(e,Je(t,e)?{html:t}:{text:t});case a(t,Node):return pt(e,t);default:return _(e,t)}}function gt(t){return delete t.data,Object.keys(t).length<1||Object.keys(t).forEach(e=>{let r=e.toLowerCase();r in Re&&(t[Re[r]]=t[e],delete t[e])}),t}function pt(t,e){let r=_(t);return r.append(e),r}function _(t,e={}){e=ke(e,{});let r=Object.entries(e.data??{}),n=Object.assign(ve(t)?new Comment(e?.text):document.createElement(t),gt(e));return r.length&&r.forEach(([o,s])=>n.dataset[o]=String(s)),n}function ke(t,e){return e?a(t,{isTypes:Object,notTypes:[Array,null,NaN,Proxy],defaultValue:e}):a(t,{isTypes:Object,notTypes:[Array,null,NaN,Proxy]})}function yt(t){return ke(t)?t?.text??t?.textContent??"":String(t)}function ht(t){return _("b",{style:"color:red",text:`'${t}' is not a valid HTML-tag`})}function Je(t,e){return!ve(e)&&a(t,String)&&/<.*>|&[#|0-9a-z]+[^;];/i.test(t)}function bt(t){return t?.constructor===Comment||t?.constructor===CharacterData}function ve(t){return t?.constructor===Comment||/comment/i.test(t)}function St(t){return!a(_(t),HTMLUnknownElement)}function xt(t){return(e,...r)=>dt(t,e,...r)}var{IS:re,maybe:br,$Wrap:Sr,xProxy:xr,isNothing:vr}=vt();function vt(){Symbol.proxy=Symbol.for("toa.proxy"),Symbol.is=Symbol.for("toa.is"),Symbol.type=Symbol.for("toa.type"),Symbol.isSymbol=Symbol.for("toa.isASymbol"),f();let t=b(),[e,r]=[m(),A()];return r.custom(),{IS:n,maybe:t,$Wrap:e,isNothing:g,xProxy:r};function n(i,...l){if(t({trial:d=>"isTypes"in(l?.[0]??{})})){let d=l[0];return"defaultValue"in d?S(i,d):"notTypes"in d?p(i,d):n(i,...[d.isTypes].flat())}let u=typeof i=="symbol"?Symbol.isSymbol:i;return l.length>1?L(u,...l):s(i,...l)}function o(i){return i?.[Symbol.proxy]??n(i)}function s(i,...l){let{noInput:u,noShouldbe:d,compareTo:w,inputCTOR:H,isNaN:j,isInfinity:k,shouldBeFirstElementIsNothing:J}=x(i,...l);switch(l=l.length&&l[0],!0){case J:return String(i)===String(w);case(i?.[Symbol.proxy]&&d):return i[Symbol.proxy];case j:return d?"NaN":t({trial:Q=>String(w)})===String(i);case k:return d?"Infinity":t({trial:Q=>String(w)})===String(i);case u:return d?String(i):String(w)===String(i);case H===Boolean:return l?H===l:"Boolean";default:return h(i,l,d,c(i,H))}}function c(i,l){return i===0?Number:i===""?String:i?l:{name:String(i)}}function x(i,...l){let u=l.length<1,d=!u&&l[0],w=!u&&g(l[0]),H=i==null,j=!H&&Object.getPrototypeOf(i)?.constructor,k=t({trial:Q=>String(i)})==="NaN",J=t({trial:Q=>String(i)})==="Infinity";return{noInput:H,noShouldbe:u,compareTo:d,inputCTOR:j,isNaN:k,isInfinity:J,shouldBeFirstElementIsNothing:w}}function h(i,l,u,d){switch(!0){case(!u&&l===i||i?.[Symbol.proxy]&&l===Proxy):return!0;case t({trial:w=>String(l)})==="NaN":return String(i)==="NaN";case(i?.[Symbol.toStringTag]&&n(l,String)):return String(l)===i[Symbol.toStringTag];default:return l?t({trial:w=>i instanceof l})||l===d||l===Object.getPrototypeOf(d)||`${l?.name}`===d?.name:i?.[Symbol.toStringTag]&&`[object ${i?.[Symbol.toStringTag]}]`||d?.name||String(d)}}function L(i,...l){return l.some(u=>n(i,u))}function g(i,l=!1){let u=i==null;return u=l?u||n(i,1/0)||n(i,NaN):u,u}function b(){let i=(l,u)=>l?.constructor===Function?l(u):void 0;return function({trial:l,whenError:u=()=>{}}={}){try{return i(l)}catch(d){return i(u,d)}}}function m(){return function(i){return Object.freeze({get value(){return i},get[Symbol.type](){return o(i)},get type(){return o(i)},[Symbol.is](...l){return n(i,...l)},is(...l){return n(i,...l)}})}}function S(i,{defaultValue:l,isTypes:u=[void 0],notTypes:d}={}){return u=u?.constructor!==Array?[u]:u,d=d&&d?.constructor!==Array?[d]:[],d.length<1?n(i,...u)?i:l:p(i,{isTypes:u,notTypes:d})?i:l}function p(i,{isTypes:l=[void 0],notTypes:u=[void 0]}={}){return l=l?.constructor!==Array?[l]:l,u=u?.constructor!==Array?[u]:u,n(i,...l)&&!n(i,...u)}function f(){Object.getOwnPropertyDescriptors(Object.prototype)[Symbol.is]||(Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return o(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...i){return n(this,...i)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(i){return o(i)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(i,...l){return n(i,...l)},enumerable:!1,configurable:!1}}))}function y(i){let l=String(Object.getPrototypeOf(i)?.constructor);return l.slice(l.indexOf("ion")+3,l.indexOf("(")).trim()}function v(i){let l=i.set;return i.set=(u,d,w)=>d===Symbol.proxy?u[d]=w:l(u,d,w),i}function A(){let i=Proxy;return{native(){Proxy=i},custom(){Proxy=new i(i,{construct(l,u){for(let w of u)w.set&&(w=v(w));let d=new l(...u);return d[Symbol.proxy]=`Proxy (${y(u[0])})`,d}})}}}}var U=wt;function wt({styleSheet:t,createWithId:e}={}){let{tryParseAtOrNestedRules:r,ruleExists:n,checkParams:o,sheet:s,removeRules:c,consider:x,currentSheetID:h}=Et({styleSheet:t,createWithId:e});function L(p,f){if(p&&f.removeProperties){Object.keys(f.removeProperties).forEach(y=>p.style.removeProperty(Qe(y)));return}Object.entries(f).forEach(([y,v])=>{y=Qe(y.trim()),v=v.trim();let A;if(/!important/.test(v)&&(v=v.slice(0,v.indexOf("!important")).trim(),A="important"),!CSS.supports(y,v))return console.error(`StylingFactory ${h} error: '${y}' with value '${v}' not supported (yet)`);Be(()=>p.style.setProperty(y,v,A),`StylingFactory ${h} (setRule4Selector) failed`)})}function g(p,f,y=s){if(p=p?.trim?.(),!re(p,String)||!p.length||/[;,]$/g.test(p))return console.error(`StylingFactory ${h} (setRules): [${p||"[no selector given]"}] is not a valid selector`);if(f.removeRule)return c(p);let v=n(p,!0),A=v||y.cssRules[y.insertRule(`${p} {}`,y.cssRules.length||0)];return x(()=>L(A,f),p,v)}function b(p){let f=p.trim().split(/{/,2),y=f.shift().trim();if(!re(y,String)||!y?.trim()?.length)return console.error(`StylingFactory ${h} (doParse): no (valid) selector could be extracted from rule ${we(p)}`);let v=Ht(f.shift());return Be(()=>g(y,v),`StylingFactory ${h} (setRules) failed`)}function m(p){let f=r(p);return f.done?f.existing:b(p)}function S(p,f){return p.trim().startsWith("@media")?m(Ft(p,f)):g(p,f)}return function(p,f={}){return o(p,f)&&(Object.keys(f).length?S(p,f):m(p))}}function Et({styleSheet:t,createWithId:e}){let r="Note: The rule or some of its properties may not be supported by your browser (yet)",n=`for style#${e}`;t=e?o(e):t;function o(m){let S=document.querySelector(`#${m}`)?.sheet;if(S)return S;let p=Object.assign(document.createElement("style"),{id:m});return document.head.insertAdjacentElement("beforeend",p),p.sheet}function s(m){return console.error(`StylingFactory ${n} [rule: ${m}]
    => @charset, @namespace and @import are not supported here`),{done:!0}}function c(m,S){return[...t.rules].find(p=>S?ze(p.selectorText||"",m):Tt`${Ct(m)}${[..."gim"]}`.test(p.cssText))}function x(m){return/^@charset|@import|namespace/i.test(m.trim())?s(m):m.match(/}/g)?.length>1?{existing:g(m,1),done:!0}:{done:!1}}function h(m){let S=[...t.cssRules].reduce((f,y,v)=>ze(y.selectorText||"",m)&&f.concat(v)||f,[]),p=S.length;return S.forEach(f=>t.deleteRule(f)),p>0?console.info(`\u2714 Removed ${p} instance${p>1?"s":""} of selector ${m} from ${n.slice(4)}`):console.info(`\u2714 Remove rule: selector ${m} does not exist in ${n.slice(4)}`)}function L(m,S){return m&&re(m,String)&&m.trim().length>0&&re(S,Object)||(console.error(`StylingFactory ${n} called with invalid parameters`),!1)}function g(m){m=m.trim();let S=m.slice(0,m.indexOf("{")).trim(),p=!!c(S);try{return t.insertRule(`${m}`,t.cssRules.length),p}catch(f){return console.error(`StylingFactory ${n} (tryParse) ${f.name} Error:
${f.message}
Rule: ${we(m)}
${r}`),p}}function b(m,S,p){try{return m(),p}catch(f){return console.error(`StylingFactory ${n} (tryAddOrModify) ${f.name} Error:
${f.message}
Rule: ${we(S)}
${r}`),p}}return{sheet:t,removeRules:h,tryParseAtOrNestedRules:x,ruleExists:c,checkParams:L,tryParse:g,consider:b,currentSheetID:n}}function Ft(t,e){return`${t.trim()} ${Object.entries(e).map(([r,n])=>`${r}: { ${Lt(n)}`)}`}function we(t){let e=(t||"NO RULE").trim().slice(0,50).replace(/\n/g,"\\n").replace(/\s{2,}/g," ");return t.length>e.length?`${e.trim()}...truncated`:e}function Lt(t){return Object.entries(t).map(([e,r])=>`${e}: ${r.trim()}`).join(`;
`)}function Ct(t){return t.replace(/([*\[\]()-+{}.$?\\])/g,e=>`\\${e}`)}function Tt(t,...e){let r=e.length&&Array.isArray(e.slice(-1))?e.pop().join(""):"";return new RegExp((e.length&&t.raw.reduce((n,o,s)=>n.concat(e[s-1]||"").concat(o),"")||t.raw.join("")).split(`
`).map(n=>n.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),r)}function Qe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/[^--]^-|-$/,"")}function Be(t,e){try{return t()}catch(r){console.error(`${e||"an error occured"}: ${r.message}`)}}function $t(t){return t.replace(/\/\*.+?\*\//gm,"").replace(/[}{\r\n]/g,"").replace(/(data:.+?);/g,(e,r)=>`${r}\\3b`).split(";").map(e=>e.trim()).join(`;
`).replaceAll("\\3b",";").split(`
`)}function At(t){return t.reduce((e,r)=>{let[n,o]=[r.slice(0,r.indexOf(":")).trim(),r.slice(r.indexOf(":")+1).trim().replace(/;$|;.+(?=\/*).+\/$/,"")];return n&&o?{...e,[n]:o}:e},{})}function Ht(t){return At($t(t))}function ze(t,e){return t?.replace("::",":")===e?.replace("::",":")}var Ee=!1,Dt={on:()=>Ee=!0,off:()=>Ee=!1},M={tagsRaw:V,allowUnknownHtmlTags:Dt,isAllowed(t){if(Ee)return!0;let e=a(t,String)?t.toLowerCase():t?.nodeName.toLowerCase()||"none";return e==="#text"||!!V[e]},allowTag:t=>V[t.toLowerCase()]=!0,prohibitTag:t=>V[t.toLowerCase()]=!1};var Nt=!0,ne={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/^javascript|injected|noreferrer|alert|DataURL/gi};function Pt(t){if(Nt&&Object.keys(t.removed).length){let e=Object.entries(t.removed).reduce((r,[n,o])=>[...r,`${I(n)} => ${o}`],[]).join("\\000A");C.error(`JQx: HTML creation error(s): ${e}`)}}function Mt(t){let e=t.nodeName.toLowerCase(),r=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return/-/.test(e)&&!r.find(n=>n===e)||M.isAllowed(e)}function B(t){let e={rawHTML:t?.parentElement?.getHTML()??"no html",removed:{}};return a(t,HTMLElement)&&[...t.childNodes].forEach(r=>{if(r?.children?.length&&B(r),r?.attributes){let o=a(r,SVGElement)?W.svg:W.html;[...(r??{attributes:[]}).attributes].forEach(s=>{let c=s.name.trim().toLowerCase(),x=s.value.trim().toLowerCase().replace(ne.whiteSpace,""),h=c==="href"?!ne.validURL.test(x):ne.notAllowedValues.test(x),L=c.startsWith("data")?!ne.data.test(c):!!o[c];if(h||L){let g=oe(s.value||"none",60);g+=g.length===60?"...":"",e.removed[`${s.name}`]=`attribute/property/value not allowed, removed. Value: ${g}`,r.removeAttribute(s.name)}})}if(!(Mt(r)||r.constructor===CharacterData||r.constructor===Comment)){let o=(r?.outerHTML||r?.textContent).trim(),s=oe(o,60)??"EMPTY";s+=s.length===60?"...":"",e.removed[`<${r.nodeName?.toLowerCase()}>`]=`not allowed, not rendered. Value: ${s}`,r.remove()}}),Pt(e),t}function Ot(t){let e=document.createElement("div");return e.insertAdjacentHTML(T.end,t),e.childNodes.length?B(e):void 0}function It(t,e,r){switch(!0){case a(t,Comment):return e.insertAdjacentHTML(r,`<!--${t.data}-->`);case a(t,Text):return e.insertAdjacentText(r,t.data||t.textContent);default:return}}function z(t=[],e=document.body,r=T.BeforeEnd){return r=r||T.BeforeEnd,e=e?.isJQx?e.node:e||document.body,t.reduce((n,o)=>{let s=O(o)&&Rt(o,e,r);return s?[...n,s]:n},[])}function Rt(t,e=document.body,r=T.BeforeEnd){return r=r||T.BeforeEnd,e=e?.isJQx?e?.[0]:e,a(t,Comment,Text)?It(t,e,r):a(t,HTMLElement)?e.insertAdjacentElement(r,t):void 0}function D(t){if(a(t,Text,Comment))return t;let e=t?.trim(),r=e?.split(/<text>|<\/text>/i)??[];if(r?.length&&(r=r.length>1?r.filter(o=>o.length).shift():void 0),e.startsWith("<!--")&&e.endsWith("-->"))return document.createComment(t.replace(/<!--|-->$/g,""));if(r||a(e,String)&&!/^<(.+)[^>]+>/m.test(e))return document.createTextNode(r??e);let n=Ot(t);return n.childNodes.length<1?D(`<span data-jqxcreationerror="1">${N(t,60)}</span>`):n.children[0]}function ie(t){if(t.node("#jqxPopup"))return;t.logger.log("JQx: [JQx].Popup first call. Dialog element created."),t.dialog({id:"jqxPopup"},t.div({id:"jqxPopupContent"})).render,t.editCssRules(...Ie);let e=[],[r,n]=[t("#jqxPopupContent"),t.node("#jqxPopup")],o={};return t.handle({type:"click, keydown",handlers:m,capture:!0,about:"A generic handler for JQx popups"}),Object.freeze({show:s,remove:c,removeModal:b});function s(f){if(n.open)switch(!0){case x(f):return;default:return c(),setTimeout(()=>s(f),200)}o={...f};let{content:y}=o;return t.IS(y,String,HTMLElement)||y?.isJQx?h():!0}function c(){return o.modal?p(o.warnMessage):L()}function x(f){for(let[y,v]of Object.entries(o))if(v!==f[y])return!1;return!0}function h(){r.clear();let{content:f,modal:y,closeAfter:v}=o;y=t.IS(y,Boolean)?y:!1;let A=y?"":t.div({id:"closeHandleIcon"});r.append(A,t.IS(f,String)?t.div(f):f),n.showModal(),!y&&t.IS(v,Number)&&S(c,v)}function L(){if(n.close(o.returnValue),g(),t.IS(o.callback,Function))return e.push(setTimeout(()=>o.callback(o.returnValue),200));o={}}function g(){e.forEach(f=>clearTimeout(f)),e=[]}function b({callback:f,value:y}={}){o.returnValue=y,o.modal=!1,o.callback=f||o.callback,c()}function m({evt:f}){if(!(Object.keys(o).length<1||!n.open))return f.key==="Escape"&&f.preventDefault(),o.activeTimer&&clearTimeout(o.activeTimer),(f.target.closest("#closeHandleIcon")||!f.target.closest("#jqxPopupContent"))&&c(),!0}function S(f,y){t.IS(f,Function)&&t.IS(y,Number)&&y>0&&(g(),e.push(setTimeout(f,y*1e3)))}function p(f){if(!t.IS(f,String,HTMLElement,Proxy))return;let y=r.find$(".warn");switch(!0){case y.is.empty:y=t.div({class:"warn"},f);default:r.append(y.addClass("active")),S(()=>r.find$(".warn").removeClass("active"),2)}}}function le(t){let e={},r="anonymous_";function n(g){if(g){let{handler:b,capture:m,type:S}=g;document.addEventListener(S,b,{capture:m})}}function o(g){if(g){let{type:b,handler:m,capture:S}=g;document.removeEventListener(b,m,{capture:S})}}function s(g,b,m,S){return function(p){if(!F(b))return g({evt:p});let f=p.target.closest(b);if(f){let y=t(f);g({self:y,me:y,evt:p}),m&&h(p.type,S)}return!0}}function c(g){return e[g]=e[g]||{},e[g]}function x(g,b){return Object.entries(c(g)).find(([m])=>m===b)}function h(g,b){let m=x(g,b);m&&(o(m[1]),delete e[g][b],delete se[b],console.warn(`Removed listener [${b}] for event type [${g}].`))}function L(g){let{type:b,handler:m,name:S,capture:p,once:f,selector:y,node:v,about:A}=g;e[b]=e[b]||{};let i=Fe(S||m.name),l=m;if(v instanceof HTMLElement){let u=v.dataset.hid||i;v.dataset.hid=u,y=`[data-hid=${u}]`}switch(!0){case!e[b][i]:return e[b][i]={name:i,handler:s(m,y,f,i),capture:We(b,p),once:!!f,type:b,initialHandler:l,selector:!!y&&y||!1,about:!!A&&A||!1,unListen(){h(b,i)}},e[b][i];default:return console.warn(`The listener [${i}] for [${b}] exists, it is not re-assigned.`)}}return{remove(...g){return h(...g)},listen:function(g){let{type:b,handler:m}=g;if(!F(b)||!a(m,Function))return;let S=L(g);if(S)return n(S),{type:b,name:S.name,unListen(){h(b,S.name)}}},get ListenerStore(){return Object.freeze({...e})}}}var C=Jt(),jt=["load","unload","scroll","focus","blur","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","loadstart","progress","error","abort","load","loadend","pointerenter","pointerleave","readystatechange"],T=Object.freeze(new Proxy({start:"afterbegin",afterbegin:"afterbegin",end:"beforeend",beforeend:"beforeend",before:"beforebegin",beforebegin:"beforebegin",after:"afterend",afterend:"afterend"},{get(t,e){return t[String(e).toLowerCase()]??t[e]}})),kt=[...Array(26)].map((t,e)=>String.fromCharCode(e+65)).concat([...Array(26)].map((t,e)=>String.fromCharCode(e+97))).concat([...Array(10)].map((t,e)=>`${e}`)),Ce=Object.freeze({get(t,e){return t[Y(e)]||t[e]},enumerable:!1,configurable:!1}),se={};function Te(){let t=setTimeout(()=>{});for(;t>=0;)clearTimeout(t--)}function Fe(t){return F(t)&&!/^handler|handlers$/gi.test(t.trim())?t.trim():Ve()}function Ve(t){let e=`anonymous_${Math.random().toString(36).slice(2)}`;return se[e]?Ve():(se[e]=e,e)}function We(t,e){return!!jt.find(r=>r===t)||!!e}function ue(t){return t.startsWith("data")||W.html.find(e=>t.toLowerCase()===e)}function fe(t){return t&&(t.textContent="")}function G(t,e=0,r=!0){return t=t?.parentElement,e+=t?t[r?"scrollTop":"scrollLeft"]:0,t?G(t,e,r):e}function F(t,e=1){return e=a(e,Number)&&e||1,a(t,String)&&t.length>=e}function oe(t,e=120){return N(t,e).replace(/&lt;/g,"<")}function N(t,e=120){return`${t}`.trim().slice(0,e).replace(/>\s+</g,"><").replace(/</g,"&lt;").replace(/\s{2,}/g," ").replace(/\n/g,"\\n")+(t.length>e?" &hellip;":"").trim()}function I(t){switch(!0){case a(t,String):let e=document.createElement("div");return e.append(t),e.innerHTML;default:return t}}function Le(t){return a(t,String)&&Object.assign(document.createElement("textarea"),{innerHTML:t}).textContent||t}function Jt(){let t=!1,e=[],r={get on(){return t=!0,r},get off(){return t=!1,r},get backLog(){return e}};function n(...c){return e.unshift(...c.map(x=>`${ce()} \u2A3B ${Le(x)}`)),console.error(e.slice(0,c.length).join(`
`)),r}function o(...c){return e.unshift(...c.map(x=>`${ce()} \u26A0 ${Le(x)}`)),console.warn(e.slice(0,c.length).join(`
`)),r}function s(...c){switch(e.unshift(...c.map(x=>`${ce()} \u2714 ${Le(x)}`)),t){case!0:console.log(e.slice(0,c.length).join(`
`));default:return r}}return Object.defineProperties(r,{log:{value:s,enumerable:!1},error:{value:n,enumerable:!1},warn:{value:o,enumerable:!1}}),Object.freeze(r)}function ce(){return(t=>`[${ae(t.getHours())}:${ae(t.getMinutes())}:${ae(t.getSeconds())}.${ae(t.getMilliseconds(),3)}]`)(new Date)}function $e(t,e){if(t)for(let[r,n]of Object.entries(e)){if(r=P(r),r.startsWith("data"))return de(t,n);a(n,String)&&ue(r)&&t.setAttribute(r,n.split(/[, ]/)?.join(" "))}}function de(t,e){if(t&&a(e,Object))for(let[r,n]of Object.entries(e))t.setAttribute(`data-${P(r)}`,n)}function me(t){return t?a(t,Proxy)?[t.EL]:a(t,NodeList)?[...t]:O(t)?[t]:K(t)?t:t.isJQx?t.collection:void 0:[]}function ge(t,e){return t.andThen(e)}function pe(t,e){return t.andThen(e,!0)}function O(t){return a(t,Text,HTMLElement,Comment)}function Z(t,e){if(a(e,Object))for(let[r,n]of Object.entries(e)){let o;/!important/i.test(n)&&(n=n.slice(0,n.indexOf("!")).trim(),o="important"),t.style.setProperty(P(r),n,o)}}function R(t){let e=t.cloneNode(!0);return e.removeAttribute&&e.removeAttribute("id"),t.isConnected?t.remove():t=null,e}function _e(t){if(!t)return;let e=t.style,r=getComputedStyle(t),n=[e.visibility,r.visibility].includes("hidden"),o=[e.display,r.display].includes("none"),s=t.hidden,c=t.offsetTop<0||t.offsetLeft+t.offsetWidth<0||t.offsetLeft>document.body.offsetWidth,x=+r.opacity==0||+(e.opacity||1)==0;return!(s||c||x||o||n)}function Ue(t){return t?.isConnected?!![...document.querySelectorAll(":is(:read-write)")].find(e=>e===t):!1}function ye(t){return t?.filter(e=>e).reduce((e,r)=>e.concat(De(r)?`<!--${r.data}-->`:be(r)?r.textContent:r.outerHTML),"")}function ae(t,e=2){return`${t}`.padStart(e,"0")}function Ge(t,e=0){return[t,e]=[Math.floor(t),Math.ceil(e)],Math.floor([...crypto.getRandomValues(new Uint32Array(1))].shift()/2**32*(t-e+1)+e)}function he(){return`_${Qt(kt).slice(0,8).join("")}`}function Ae(t){return t=a(t,String)&&/,/.test(t)?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):t,a(t,Array)?t:a(t,String)&&t?.trim().toLowerCase()||""}function Ze(t){return t?.isConnected?!![...document.querySelectorAll(":is(:modal)")].find(e=>e===t):!1}function He(t,e){switch(t=String(t).trim(),!0){case/^(0|false|f)$/i.test(t):return!1;case/^(1|true|t)$/i.test(t):return!0;default:return e}}function Qt(t){let e=t.length;for(;e--;){let r=Ge(e);[t[e],t[r]]=[t[r],t[e]]}return t}function Y(t){return a(t,String)?t.toLowerCase().split("-").map((e,r)=>r&&`${Bt(e)}`||e).join(""):t}function P(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/^-|-$/,"")}function Bt([t,...e]){return`${t.toUpperCase()}${e.join("")}`}function be(t){return a(t,Comment,Text)}function De(t){a(t,Comment)}function Ye(t){return a(t,Text)}function X(t){return a(t,String)&&/^<|>$/.test(`${t}`.trim())}function K(t){return a(t,Array)&&!t?.find(e=>!O(e))}function Se(t){return a(t,Array)&&!t?.find(e=>!X(e))}function E(t,e){let r=t.collection.filter(n=>!be(n));for(let n=0;n<r.length;n+=1)e(r[n],n);return t}function Ne(t,e,r){let n=e!==document.body&&a(t,String)&&t.toLowerCase()!=="body"?e:document,o;try{r.collection=[...n.querySelectorAll(t)]}catch{o=`Invalid CSS querySelector. [${a(t,String)?t:"Nothing valid given!"}]`}let s=r.collection.length;return s<1?`CSS querySelector "${t}", output: nothing`:o??`CSS querySelector "${t}", output ${s} element${s>1?"s":""}`}function zt(t){let e=`anonymous_${Math.random().toString(36).slice(2)}`;return t.data.add({hid:e}),`[data-hid="${e}"]`}function Xe(){return{isCommentOrTextNode:be,isNode:O,isComment:De,isText:Ye,isHtmlString:X,isArrayOfHtmlElements:K,isArrayOfHtmlStrings:Se,ElemArray2HtmlString:ye,input2Collection:me,setCollectionFromCssSelector:Ne,addHandlerId:zt,cssRuleEdit:U({createWithId:"JQxStylesheet"})}}function Ke(){let e=Object.freeze({notInDOM:"n/a",writable:"n/a",modal:"n/a",empty:!0,open:"n/a",visible:"n/a"});return r=>{let n=r.node;return a(n,Node)?Object.freeze({get writable(){return Ue(n)},get modal(){return Ze(n)},get inDOM(){return n.isConnected},get open(){return n.open??!1},get visible(){return _e(n)},get disabled(){return n.hasAttribute("readonly")||n.hasAttribute("disabled")},get empty(){return r.collection.length<1},get virtual(){return r.isVirtual}}):e}}function qe(t,e,r,n){r&&a(e,String)&&(e={[e]:r==="-"?"":r});let o;e.className&&(o=e.className,delete e.className),o=[...t.classList].find(c=>c.startsWith("JQxClass-")||o&&c===o)||o||`JQxClass-${he().slice(1)}`,n.editCssRule(`.${o}`,e),t.classList.add(o)}var Wt=Ke();function et(t){return{factoryExtensions:Vt(t),instanceExtensions:_t(t)}}function Vt(t){return{data(e){return{get all(){return new Proxy(e[0]?.dataset??{},Ce)},set(r={}){if(!e.is.empty&&a(r,Object))for(let[n,o]of Object.entries(r))e.setData({[n]:o});return e},get(r,n){return e.data.all[r]??n},add(r={}){if(!e.is.empty&&a(r,Object))for(let[n,o]of Object.entries(r))e.setData({[n]:o});return e},remove(r){return e[0]?.removeAttribute(`data-${P(r)}`),e}}},dimensions(e){if(e.is.empty)return C.error("[JQx instance].dimensions called on empty instance"),{error:"[JQx instance].dimensions: NO ELEMENTS"};let{node:r}=e,n=r.getBoundingClientRect().toJSON();return n.scrollTopDistance=G(r,0),n.scrollLeftDistance=G(r,0,!1),n},node(e){return e[0]},HTML(e){return{get(r,n){if(e.is.empty)return"NO ELEMENTS IN COLLECTION";let o=r?e.outerHtml:e.html();return n?I(o):o},set(r,n=!1,o=!1){r=r.isJQx?r.HTML.get(1):r;let s=a(r,String);return r=s&&o?I(r):r,s&&(r||"").trim().length&&e.html(r,n),e},replace(r,n=!1){return e.HTML.set(r,!1,n)},append(r,n=!1){return r=a(r,HTMLElement)?t(r).HTML.get(1):r.isJQx?r.HTML.get(1):r,e.HTML.set(r,!0,n)},insert(r,n=!1){return r=a(r,HTMLElement)?t(r).HTML.get(1):r.isJQx?r.HTML.get(1):r,e.HTML.set(r+e.HTML.get(),!1,n)}}},is(e){return Wt(e)},length(e){return e.collection.length},outerHtml(e){return(e.first()||{outerHTML:void 0}).outerHTML},parent(e){let r=t(e[0]?.parentNode);return r.is.empty?e:r},render(e){switch(!0){case!e.is.empty:return e.toDOM();default:return t.logger.warn("[JQx.render]: empty collection"),e}},Style(e){return{get computed(){return e.is.empty?{}:getComputedStyle(e[0])},inline(r){return e.style(r)},inSheet(r){return e.css(r)},valueOf(r){return e.is.empty?void 0:getComputedStyle(e[0])[P(r)]},nwRule(r){return e.Style.byRule({rules:r})},byRule({classes2Apply:r=[],rules:n=[]}={}){let s=a(n,String)&&!r.length?n.split("{")[0].trim():"";if(n=n&&a(n,String)?[n]:n,r=r&&a(r,String)?[r]:r,(n?.length||r?.length)&&(n?.length&&t.editCssRules(...n),r))for(let c of r)e.addClass(c);return s?.startsWith(".")&&e.addClass(s.slice(1)),s?.startsWith("#")&&!e.attr("id")&&e.prop({id:s.slice(1)}),e}}}}}function _t(t){return{addClass(e,...r){return E(e,n=>n&&r.forEach(o=>n.classList.add(o)))},after:ge,afterMe:ge,andThen(e,r,n=!1){if(!r||!a(r,String,Node,Proxy))return C.log("[JQx instance].[before(Me) | after(Me) | andThen]: invalid/-sufficient input."),e;r=r?.isJQx?r:a(r,Node)?t.virtual(r):t.virtual(D(r));let[o,s,c]=n?[0,"before",r.collection.concat(e.collection)]:[e.collection.length-1,"after",e.collection.concat(r.collection)];return e[o][s](...r.collection),e.collection=c,e},append(e,...r){if(e.is.empty||r.length<1)return e;let n=e.length===1;for(let o of r){if(!o.isJQx&&F(o)){let s=o.trim(),x=!/^<(.+)[^>]+>$/m.test(s)?t.text(o):D(o);E(e,h=>h.append(n?x:R(x)))}O(o)&&E(e,s=>s.append(n?o:R(o))),o.isJQx&&!o.is.empty&&E(e,s=>o.collection.forEach(c=>s.append(n?c:R(c))))}return e},appendTo(e,r){switch(!0){case(!r.isJQx&&!a(r,HTMLElement)):return $.warn("[JQx instance].appendTo: invalid input"),e;default:return(r.isJQx?r:t(r)).append(e),e}},attr(e,r,n){if(!e.node)return e;if(!n&&F(r))return r=P(r),r==="class"?[...e.node.classList].join(" "):e.node.getAttribute(r);if(F(r)&&n)switch(r=P(r),!0){case r.startsWith("data-"):r={data:{[r.replace("data-","")]:n}};break;default:r={[r]:n}}return a(r,Object)&&!e.is.empty&&$e(e.node,r),e},before:pe,beforeMe:pe,clear(e){return E(e,fe)},closest(e,r){let n=F(r)?e.node?.closest(r):void 0;return n?t(n):e},computedStyle(e,r){let{node:n}=e;return n&&getComputedStyle(n)[r]},css(e,r,n){return E(e,o=>qe(o,r,n,t))},duplicate(e,r=!1,n=document.body){switch(!0){case e.is.empty:return C.error("Duplicating an empty JQx instance is not possible"),e;default:let o=e.collection[0].cloneNode(!0);return o.childNodes.forEach(s=>{s.removeAttribute&&s?.removeAttribute("id")}),r?t(o).toDOM(n):t.virtual(o)}},each(e,r){return E(e,r)},empty(e){return E(e,fe)},find(e,r){return e.collection.length>0?[...e.first()?.querySelectorAll(r)]:[]},find$(e,r){return e.collection.length>0?t(r,e):e},first(e,r=!1){return e.collection.length>0?r?e.single():e.collection[0]:void 0},first$(e,r){return e.single(r)},getData(e,r,n){return e.node?.dataset?.[r]||n},hasClass(e,...r){return e.is.empty||!e.node.classList.length?!1:r.find(n=>e.node.classList.contains(n))&&!0||!1},hide(e){return E(e,r=>Z(r,{display:"none !important"}))},html(e,r,n){switch(!0){case(e.is.empty&&!F(r)):return"";case!F(r):return e.node?.getHTML()??"";default:let o=D(`<div>${r.isJQx?r.HTML.get(!0):r}</div>`);return E(e,c=>(c.textContent=n?c.textContent:"",c.insertAdjacentHTML(t.at.end,o.getHTML())))}},htmlFor(e,r,n="",o=!1){if(e.is.empty||!F(r)||!F(n))return e;let s=e.find$(r);if(s.length<1)return e;let c=D(`<span>${n}</span>`);return s.each(x=>{o||(x.textContent=""),x.insertAdjacentHTML(t.at.end,c?.getHTML())}),e},isEmpty(e){return!e.node},nth$(e,r){return e.single(r)},on(e,r,...n){switch(!0){case(e.is.empty||!a(r,String,Array)||!F(r)||n.length<1):return e;default:return t.handle({type:r,node:e.node,handler:n}),e}},once(e,r,...n){switch(!0){case(e.is.empty||!a(r,String,Array)||!F(r)||n.length<1):return e;default:return t.handle({type:r,once:!0,node:e.node,handler:n}),e}},prepend(e,...r){if(e.is.empty||!r)return;let n=e.length===1;for(let o of r){if(F(o)){o=o.trim();let c=!/^<(.+)[^>]+>$/m.test(o)?t.text(o):D(o);c=n?c:R(c),E(e,x=>x.prepend(c.cloneNode(!0)))}O(o)&&E(e,s=>s.prepend(n?o:R(o))),o.isJQx&&!o.is.empty&&(o.collection.length>1&&o.collection.reverse(),E(e,s=>E(o,c=>s.prepend(n?c:R(c)))),o.collection.reverse())}return e},prependTo(e,r){return r.isJQx||(r=t.virtual(r)),r.prepend(e),e},prop(e,r,n){if(a(r,String)&&!n)return r.startsWith("data")?e[0]?.dataset[r.slice(r.indexOf("-")+1)]:e[0]?.[r];let o=a(r,Object)?r:{[r]:n};for(let[s,c]of Object.entries(o)){if(s=s.trim(),c&&!ue(s)||!c)return!1;if(s.toLowerCase()==="id")return e[0].id=c;E(e,h=>{if(s.startsWith("data"))return h.dataset[s.slice(s.indexOf("-")+1)]=c;h[s]=c})}return e},remove(e,r){C.log(`remove ${N(e.HTML.get(1),40)}${r?` /w selector ${r}`:""}`);let n=s=>s.remove(),o=()=>e.collection=e.collection.filter(s=>document.documentElement.contains(s));if(r){let s=e.find$(r);return s.is.empty||(E(s,n),o()),e}return E(e,n),o(),e},rmAttr(e,...r){for(let n of r)e.node.removeAttribute(n);return e},removeClass(e,...r){return E(e,n=>{if(n)for(let o of r)n.classList.remove(o)})},renderTo(e,r,n){return r=a(r,HTMLElement)||r.isJQx?r:document.body,n=a(n,String)&&t.at[n]?n:t.at.end,e.first$().toDOM(r,n),e},replace(e,r,n){let o=e.node;return!r||!a(n,HTMLElement)&&!n?.isJQx?(t.logger.error("JQx replace: invalid replacement value"),e):((n.isJQx||a(n,NodeList))&&(n=n[0]),o&&r&&(r=a(r,String)?o.querySelectorAll(r):r.isJQx?r.collection:r,a(r,HTMLElement,NodeList,Array)&&a(n,HTMLElement)&&(a(r,HTMLElement)?[r]:[...r]).forEach(s=>s.replaceWith(n.cloneNode(!0)))),e)},replaceClass(e,r,...n){return E(e,o=>{o.classList.remove(r);for(let s of n)o.classList.add(s)})},replaceMe(e,r){return e.replaceWith(r)},replaceWith(e,r){return r=a(r,Element)?r:r.isJQx?r[0]:void 0,r&&(e[0].replaceWith(r),e=t.virtual(r)),e},setData(e,r){return E(e,n=>de(n,r))},show(e){return E(e,r=>Z(r,{display:"revert-layer !important"}))},single(e,r){let n=e.collection.length>0;switch(r=r??0,!0){case(n&&a(r,String)):return e.find$(r);case(n&&a(r,Number)):return t(e.collection[r]);case n:return e.collection[0];default:return e}},style(e,r,n){return E(e,s=>{n&&a(r,String)&&(r={[r]:n||"none"}),Z(s,r)})},text(e,r,n=!1){switch(!0){case e.isEmpty():return e;case!a(r,String):return e.node.textContent;default:return E(e,o=>o.textContent=n?o.textContent+r:r)}},toDOM(e,r=document.body,n=T.BeforeEnd){return e.isVirtual=!1,z(e.collection,r,n),e},toggleClass(e,r){return E(e,n=>n.classList.toggle(r))},toNodeList(e){return[...e.collection].map(r=>document.importNode(r,!0))},trigger(e,r,n,o){if(n=/Event\]$/.test(a(n))?n:Event,o=a(o,Object)?{...o,bubbles:o.bubbles??!0}:{bubbles:!0},!e.is.empty){let s=new n(r,o);e.each(c=>c.dispatchEvent(s))}return e},val(e,r){switch(!0){case(e.is.empty||!a(e.node,HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement)):return e;case!a(r,String):return e.node.value;default:return e.node.value=a(r,String)?r:"",e}}}}var Pe,xe,{isComment:Kr,isText:qr,isHtmlString:en,isArrayOfHtmlElements:tn,isArrayOfHtmlStrings:rn,ElemArray2HtmlString:nn,addHandlerId:on,cssRuleEdit:Me,addFn:Ut}=Gt();function Gt(){return{...Xe(),addFn:Zt}}function Zt(t,e){return t=t?.trim(),!F(t)||!a(e,Function)?C.error("JQx.fn: method invalid parameter(s)"):xe[t]=(r,...n)=>e(r,...n)}function Yt(t){return function(e,r,n){if(e=e?.trim(),!F(e)||!a(r,Function))return t.error("JQx.staticFn: invalid parameter(s)");let o=n?{get(){return r()}}:{value(...s){return r(...s)}};try{Object.defineProperty(t,e,o)}catch{return t.warn(`JQx.staticFn: extension [${e}] already exists`)}return C.log(`JQx: added static extension function [${e}]`)}}function q(t){return new Proxy(t,Object.freeze({get:(e,r)=>Xt(e,r,t)}))}function tt(t,e){return(...r)=>a(t,Function)&&t(q(e),...r)}function Xt(t,e,r){switch(!0){case a(e,Symbol):return t;case a(+e,Number):return t.collection?.[e]||void 0;case e in Pe:return tt(Pe[e],r)();case e in xe:return tt(xe[e],r);default:return t[e]}}function ot(t){let e=rr(t);for(let[r,n]of Object.entries(Object.getOwnPropertyDescriptors(e)))Object.defineProperty(t,r,n);return t}function Kt(t){return{allow:e=>{let r=/-/.test(e),n=r&&e;e=r?Y(e):e.toLowerCase(),M.allowTag(e),a(t[e],Function)||Object.defineProperties(t,Oe(e,!0,t,n))},prohibit:e=>{e=e.toLowerCase(),M.prohibitTag(e),a(t[e],Function)&&Object.defineProperties(t,Oe(e,!1,t))}}}function rt(...t){if(t.length===1){let e=String(t.shift().trim());t=e.startsWith("!")?[e.slice(1,-1)]:e.split(",").map(r=>r.trim())}for(let e of t.map(r=>r.startsWith("!")?r.slice(1,-1):r))Me(e,{removeRule:1})}function qt(t){return function(e,r,n){r=r?.isJQx?r?.[0]:r,n=n&&Object.values(T).find(s=>n===s);let o=t(e,document.createElement("br"));if(r&&!a(r,HTMLBRElement))for(let s of o.collection)n?r.insertAdjacentElement(n,s):r.append(s);return o}}function er(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);for(let[o,s]of Object.entries(n))!(o in e)&&Object.defineProperty(e,o,{...s,enumerable:!1})}return e}function tr(t,e,r,n){return t=P(n||t.toLowerCase()),{get(){return(...o)=>e&&r.virtual(B(te[t](...o)))},enumerable:!1,configurable:!0}}function Oe(t,e,r,n){t=t.toLowerCase();let o=tr(t,e,r,n);return n?{[n]:o,[Y(n)]:o}:{[t]:o,[t.toUpperCase()]:o}}function rr(t){return er(Object.entries(M.tagsRaw).reduce(nr(t),{}),cr(t))}function nr(t){return function(e,[r,n]){return n&&Object.defineProperties(e,Oe(r,n,t)),e}}function or(t){return function(e,r,...n){a(r,Function)&&(n.push(r),r=void 0),t({type:e,selector:r,handlers:n})}}function ir(t){return function(e){let{type:r,types:n,origin:o,selector:s,handler:c,handlers:x,node:h,name:L,capture:g,once:b,about:m}=e;c=x||c,r=n||r,s=o||s;let S=Ae(r),p=L;c=a(c,Function)?[c]:c;let f={type:S,selector:s||o,capture:g,name:p,once:b,node:h,about:m};switch(!0){case(a(S,Array)&&S.length>0):for(let y of S)f.type=y,nt(c,f,t);break;default:return nt(c,f,t)}}}function nt(t,e,r){for(let n of t)r.listen({...e,handler:n})}function lr(t){return function(e,r){return r=F(r)&&r,e=F(e)&&e,r&&e&&t.listenerStore[e][r]}}function sr(t){return t.activePopup||Object.defineProperty(t,"activePopup",{value:ie(t),enumerable:!1}),t.activePopup}function ar(t){let e=(g,b)=>Me(g,b),r=g=>U({createWithId:g||`jqx${he()}`}),n=(...g)=>{for(let b of g)Me(b)},o=Kt(t),s=le(t),c=ir(s);return{editCssRule:e,createStyle:r,editCssRules:n,allowProhibit:o,handle:c,capturedHandling:c,log:(...g)=>C.on.log(...g).off,warn:(...g)=>C.on.warn(...g).off,error:(...g)=>C.on.error(...g).off,handlerWrapper:s}}function cr(t){let{factoryExtensions:e,instanceExtensions:r}=et(t);Pe=e,xe=r;let{editCssRule:n,createStyle:o,editCssRules:s,allowProhibit:c,handle:x,capturedHandling:h,log:L,warn:g,error:b,handlerWrapper:m}=ar(t),S=lr(t),p=Yt(t);return{log:L,warn:g,error:b,editCssRules:s,createStyle:o,editStylesheet:o,editCssRule:n,escHtml:I,logger:C,text:(f,y=!1)=>y?t.comment(f):document.createTextNode(f),node:(f,y=document)=>y.querySelector(f,y),nodes:(f,y=document)=>[...y.querySelectorAll(f,y)],clearAllTimers:Te,get staticFn(){return function(f,y,v){return p(f,y,v)}},get toBool(){return He},get getNamedListener(){return S},get virtual(){return qt(t)},get allowTag(){return c.allow},get prohibitTag(){return c.prohibit},get removeCssRule(){return rt},get removeCssRules(){return rt},get delegate(){return or(h)},get delegateCaptured(){return h},get handle(){return h},get listen(){return m.listen},get at(){return T},get setStyle(){return n},get fn(){return Ut},get lenient(){return M.allowUnknownHtmlTags},get IS(){return a},get Popup(){return sr(t)},get listenerStore(){return m.ListenerStore}}}var it=ot(ur());function ur(){return function(e,r,n=T.BeforeEnd){if(e?.isJQx)return e;let o=a(r,HTMLBRElement);r=(!o&&r&&r.isJQx?r[0]:r)||document.body,n=n&&Object.values(T).find(m=>n===m)?n:void 0;let s=X(e),c=!s&&Se(e),x=c||s,h={collection:me(e)??[],isVirtual:o,isJQx:!0},L=K(h.collection),g=`JQx: input =&gt; ${c?`"${N(e.join(", "),70)}"`:!x&&L?`element collection [${N(h.collection.map(m=>`${a(m,Comment,Text)?"Comment|Text @":""} ${m?.outerHTML||m?.textContent}`).join(", "),70)}]`:`"${N(e,70)}"`}`;if(h.collection.length&&L)return C.log(g),o||h.collection.forEach(m=>{r.contains(m)||z([m],r,n)}),q(h);if(x){if([e].flat().forEach(m=>h.collection.push(D(m))),h.collection.length>0){let m=h.collection.filter(S=>S?.dataset?.jqxcreationerror);h.collection=h.collection.filter(S=>!S?.dataset?.jqxcreationerror),C.log(`${g}`),C.log(`JQx: created ${h.isVirtual?"VIRTUAL ":""}[${N(ye(h.collection).trim()||"sanitized: no elements remaining",70)}]`),h.isVirtual||z(h.collection,r,n)}return q(h)}let b=Ne(e,r,h);return C.log(`JQx: input => ${b}`),q(h)}}var fn=it;export{fn as default};
