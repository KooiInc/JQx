var{IS:u,maybe:q,$Wrap:nr,xProxy:or,isNothing:ir}=et();function et(){Symbol.proxy=Symbol.for("toa.proxy"),Symbol.is=Symbol.for("toa.is"),Symbol.type=Symbol.for("toa.type"),Symbol.isSymbol=Symbol.for("toa.isASymbol"),p();let r=L(),[e,t]=[g(),$()];return t.custom(),{IS:n,maybe:r,$Wrap:e,isNothing:x,xProxy:t};function n(o,...l){if(r({trial:f=>"isTypes"in(l?.[0]??{})})){let f=l[0];return"defaultValue"in f?c(o,f):"notTypes"in f?a(o,f):n(o,...[f.isTypes].flat())}let d=typeof o=="symbol"?Symbol.isSymbol:o;return l.length>1?w(d,...l):s(o,...l)}function i(o){return o?.[Symbol.proxy]??n(o)}function s(o,...l){let{noInput:d,noShouldbe:f,compareTo:h,inputCTOR:A,isNaN:R,isInfinity:k,shouldBeFirstElementIsNothing:j}=S(o,...l);switch(l=l.length&&l[0],!0){case j:return String(o)===String(h);case(o?.[Symbol.proxy]&&f):return o[Symbol.proxy];case R:return f?"NaN":r({trial:J=>String(h)})===String(o);case k:return f?"Infinity":r({trial:J=>String(h)})===String(o);case d:return f?String(o):String(h)===String(o);case A===Boolean:return l?A===l:"Boolean";default:return y(o,l,f,m(o,A))}}function m(o,l){return o===0?Number:o===""?String:o?l:{name:String(o)}}function S(o,...l){let d=l.length<1,f=!d&&l[0],h=!d&&x(l[0]),A=o==null,R=!A&&Object.getPrototypeOf(o)?.constructor,k=r({trial:J=>String(o)})==="NaN",j=r({trial:J=>String(o)})==="Infinity";return{noInput:A,noShouldbe:d,compareTo:f,inputCTOR:R,isNaN:k,isInfinity:j,shouldBeFirstElementIsNothing:h}}function y(o,l,d,f){switch(!0){case(!d&&l===o||o?.[Symbol.proxy]&&l===Proxy):return!0;case r({trial:h=>String(l)})==="NaN":return String(o)==="NaN";case(o?.[Symbol.toStringTag]&&n(l,String)):return String(l)===o[Symbol.toStringTag];default:return l?r({trial:h=>o instanceof l})||l===f||l===Object.getPrototypeOf(f)||`${l?.name}`===f?.name:o?.[Symbol.toStringTag]&&`[object ${o?.[Symbol.toStringTag]}]`||f?.name||String(f)}}function w(o,...l){return l.some(d=>n(o,d))}function x(o,l=!1){let d=o==null;return d=l?d||n(o,1/0)||n(o,NaN):d,d}function L(){let o=(l,d)=>l?.constructor===Function?l(d):void 0;return function({trial:l,whenError:d=()=>{}}={}){try{return o(l)}catch(f){return o(d,f)}}}function g(){return function(o){return Object.freeze({get value(){return o},get[Symbol.type](){return i(o)},get type(){return i(o)},[Symbol.is](...l){return n(o,...l)},is(...l){return n(o,...l)}})}}function c(o,{defaultValue:l,isTypes:d=[void 0],notTypes:f}={}){return d=d?.constructor!==Array?[d]:d,f=f&&f?.constructor!==Array?[f]:[],f.length<1?n(o,...d)?o:l:a(o,{isTypes:d,notTypes:f})?o:l}function a(o,{isTypes:l=[void 0],notTypes:d=[void 0]}={}){return l=l?.constructor!==Array?[l]:l,d=d?.constructor!==Array?[d]:d,n(o,...l)&&!n(o,...d)}function p(){Object.getOwnPropertyDescriptors(Object.prototype)[Symbol.is]||(Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return i(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...o){return n(this,...o)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(o){return i(o)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(o,...l){return n(o,...l)},enumerable:!1,configurable:!1}}))}function b(o){let l=String(Object.getPrototypeOf(o)?.constructor);return l.slice(l.indexOf("ion")+3,l.indexOf("(")).trim()}function v(o){let l=o.set;return o.set=(d,f,h)=>f===Symbol.proxy?d[f]=h:l(d,f,h),o}function $(){let o=Proxy;return{native(){Proxy=o},custom(){Proxy=new o(o,{construct(l,d){for(let h of d)h.set&&(h=v(h));let f=new l(...d);return f[Symbol.proxy]=`Proxy (${b(d[0])})`,f}})}}}}var De=nt(),z=tt(),W=rt();function tt(){return{html:Object.freeze("accept,action,align,alt,autocapitalize,autocomplete,autopictureinpicture,autoplay,background,bgcolor,border,capture,cellpadding,cellspacing,checked,cite,class,clear,contenteditable,color,cols,colspan,controls,controlslist,coords,crossorigin,datetime,decoding,default,dir,disabled,disablepictureinpicture,disableremoteplayback,download,draggable,enctype,enterkeyhint,face,for,headers,height,hidden,high,href,hreflang,id,inputmode,integrity,is,ismap,kind,label,lang,list,loading,loop,low,max,maxlength,media,method,min,minlength,multiple,muted,name,nonce,noshade,novalidate,nowrap,open,optimum,pattern,placeholder,playsinline,poster,preload,pubdate,radiogroup,readonly,rel,required,rev,reversed,role,rows,rowspan,spellcheck,scope,selected,shape,size,sizes,span,srclang,start,src,srcset,step,style,summary,tabindex,target,title,translate,type,usemap,valign,value,width,xmlns,slot".split(",")),svg:Object.freeze("accent-height,accumulate,additive,alignment-baseline,ascent,attributename,attributetype,azimuth,basefrequency,baseline-shift,begin,bias,by,class,clip,clippathunits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,cx,cy,d,dx,dy,diffuseconstant,direction,display,divisor,dur,edgemode,elevation,end,fill,fill-opacity,fill-rule,filter,filterunits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,fx,fy,g1,g2,glyph-name,glyphref,gradientunits,gradienttransform,height,href,id,image-rendering,in,in2,k,k1,k2,k3,k4,kerning,keypoints,keysplines,keytimes,lang,lengthadjust,letter-spacing,kernelmatrix,kernelunitlength,lighting-color,local,marker-end,marker-mid,marker-start,markerheight,markerunits,markerwidth,maskcontentunits,maskunits,max,mask,media,method,mode,min,name,numoctaves,offset,operator,opacity,order,orient,orientation,origin,overflow,paint-order,path,pathlength,patterncontentunits,patterntransform,patternunits,points,preservealpha,preserveaspectratio,primitiveunits,r,rx,ry,radius,refx,refy,repeatcount,repeatdur,restart,result,rotate,scale,seed,shape-rendering,specularconstant,specularexponent,spreadmethod,startoffset,stddeviation,stitchtiles,stop-color,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke,stroke-width,style,surfacescale,systemlanguage,tabindex,targetx,targety,transform,text-anchor,text-decoration,text-rendering,textlength,type,u1,u2,unicode,values,viewbox,visibility,version,vert-adv-y,vert-origin-x,vert-origin-y,width,word-spacing,wrap,writing-mode,xchannelselector,ychannelselector,x,x1,x2,xmlns,y,y1,y2,z,zoomandpan".split(","))}}function rt(){return{a:!0,area:!0,audio:!1,br:!0,base:!0,body:!0,button:!0,canvas:!0,comment:!0,dl:!0,data:!0,datalist:!0,div:!0,em:!0,embed:!1,fieldset:!0,font:!0,footer:!0,form:!1,hr:!0,head:!0,header:!0,output:!0,iframe:!1,frameset:!1,img:!0,input:!0,li:!0,label:!0,legend:!0,link:!0,map:!0,mark:!0,menu:!0,media:!0,meta:!0,nav:!0,meter:!0,ol:!0,object:!1,optgroup:!0,option:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!1,quote:!0,script:!1,select:!0,source:!0,span:!0,style:!0,caption:!0,td:!0,col:!0,table:!0,tr:!0,template:!1,textarea:!0,time:!0,title:!0,track:!0,details:!0,ul:!0,video:!0,del:!0,ins:!0,slot:!0,blockquote:!0,svg:!0,dialog:!0,summary:!0,main:!0,address:!0,colgroup:!0,tbody:!0,tfoot:!0,thead:!0,th:!0,dd:!0,dt:!0,figcaption:!0,figure:!0,i:!0,b:!0,code:!0,h1:!0,h2:!0,h3:!0,h4:!0,abbr:!0,bdo:!0,dfn:!0,kbd:!0,q:!0,rb:!0,rp:!0,rt:!0,ruby:!0,s:!0,strike:!0,samp:!0,small:!0,strong:!0,sup:!0,sub:!0,u:!0,var:!0,wbr:!0,nobr:!0,tt:!0,noscript:!0}}function nt(){return["::backdrop{background-color:grey;opacity:0.2;}",`#jqxPopup{overflow:hidden;background-color:transparent;outline:none;border:none;inset:0;animation:fade-out 0.5s ease-out;&[open]{display:flex;align-items:center;justify-content:center;animation:fade-in 0.5s ease;}#jqxPopupContent{background-color:white;border:solid 1px #eee;box-shadow:1px 2px 8px #999;border-radius:4px;padding:12px;vertical-align:middle;max-height:40vh;max-width:50vw;overflow:auto;margin:0 auto;div:not(#closeHandleIcon){clear:both;}@media (width <= 640px){max-width:80vw;max-height:60vh;}#closeHandleIcon{cursor:pointer;width:24px;height:24px;display:inline;position:absolute;top:4px;right:4px;justify-content:right;background-image:url("data:image/svg+xml;utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22iso-8859-1%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20id%3D%22Layer_1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20128%20128%22%20style%3D%22enable-background%3Anew%200%200%20128%20128%3B%22%20xml%3Aspace%3D%22preserve%22%3E%3Crect%20x%3D%22-368%22%20y%3D%226%22%20style%3D%22display%3Anone%3Bfill%3A%23E0E0E0%3B%22%20width%3D%22866%22%20height%3D%221018%22%2F%3E%3Ccircle%20style%3D%22fill%3A%23FFFFFF%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Ccircle%20style%3D%22fill%3A%238CCFB9%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2239%22%2F%3E%3Ccircle%20style%3D%22fill%3Anone%3Bstroke%3A%23444B54%3Bstroke-width%3A6%3Bstroke-miterlimit%3A10%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Cpolyline%20style%3D%22fill%3Anone%3Bstroke%3A%23FFFFFF%3Bstroke-width%3A6%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%3B%22%20points%3D%2242%2C69%2055.55%2C81%20%20%2086%2C46%20%22%2F%3E%3C%2Fsvg%3E");@media (width <= 640px){background-image:none;position:relative;margin:-15px -15px 4px 0;float:right;vertical-align:middle;border:1px solid #AAA;padding:2px;border-radius:50%;width:12px;height:12px;font-size:12px;line-height:12px;font-weight:bold;text-align:center;&:after{content:'\\2714';color:green;}}}.warn{display:none;text-align:center;color:red;border-top:1px solid #999;margin-top:1em;padding-top:3px;animation:warn-fade-out 0.2s ease-out;}.warn.active{opacity:1;display:block;animation:warn-fade-in 0.2s ease-in;}}}`,"@keyframes fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1, 1);display:flex;}}","@keyframes fade-out{0%{opacity:1;transform:scale(1, 1);display:flex;}100%{opacity:0;transform:scale(0, 0);display:none;}}","@keyframes warn-fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1,1 );display:block;}}","@keyframes warn-fade-out{0%{opacity:1;transform:scale(1, 1);display:block;}100%{opacity:0;transform:scale(0, 0);display:none;}}"]}var He={html:"innerHTML",text:"textContent",class:"className"},ee=ot();function ot(){let r={get(e,t){let n=String(t)?.toLowerCase();switch(!0){case n in e:return e[n];case mt(n):return Ne(e,n,t);default:return Ne(e,n,t,!0)}},enumerable:!1,configurable:!1};return new Proxy({},r)}function Ne(r,e,t,n=!1){return Object.defineProperty(r,e,{get(){return n?i=>ft(t):gt(e)}}),r[e]}function it(r,e,t){return e=e?.isJQx&&e.first()||e,q({trial:n=>dt(e)?r.append(e):Oe(e)?r.insertAdjacentHTML("beforeend",e):r.append(e),whenError:n=>console.info(`${t} (for root ${r}) not created, reason
`,n)})}function lt(r,e,...t){let n=st(e,r);return t?.forEach(i=>it(n,i,r)),n}function st(r,e){switch(r=he(e)?ut(r):r?.isJQx?r.first():r,!0){case u(r,String):return V(e,Oe(r,e)?{html:r}:{text:r});case u(r,Node):return ct(e,r);default:return V(e,r)}}function at(r){return delete r.data,Object.keys(r).length<1||Object.keys(r).forEach(e=>{let t=e.toLowerCase();t in He&&(r[He[t]]=r[e],delete r[e])}),r}function ct(r,e){let t=V(r);return t.append(e),t}function V(r,e={}){e=Pe(e,{});let t=Object.entries(e.data??{}),n=Object.assign(he(r)?new Comment(e?.text):document.createElement(r),at(e));return t.length&&t.forEach(([i,s])=>n.dataset[i]=String(s)),n}function Pe(r,e){return e?u(r,{isTypes:Object,notTypes:[Array,null,NaN,Proxy],defaultValue:e}):u(r,{isTypes:Object,notTypes:[Array,null,NaN,Proxy]})}function ut(r){return Pe(r)?r?.text??r?.textContent??"":String(r)}function ft(r){return V("b",{style:"color:red",text:`'${r}' is not a valid HTML-tag`})}function Oe(r,e){return!he(e)&&u(r,String)&&/<.*>|&[#|0-9a-z]+[^;];/i.test(r)}function dt(r){return r?.constructor===Comment||r?.constructor===CharacterData}function he(r){return r?.constructor===Comment||/comment/i.test(r)}function mt(r){return!u(V(r),HTMLUnknownElement)}function gt(r){return(e,...t)=>lt(r,e,...t)}var{IS:te,maybe:ur,$Wrap:fr,xProxy:dr,isNothing:mr}=pt();function pt(){Symbol.proxy=Symbol.for("toa.proxy"),Symbol.is=Symbol.for("toa.is"),Symbol.type=Symbol.for("toa.type"),Symbol.isSymbol=Symbol.for("toa.isASymbol"),p();let r=L(),[e,t]=[g(),$()];return t.custom(),{IS:n,maybe:r,$Wrap:e,isNothing:x,xProxy:t};function n(o,...l){if(r({trial:f=>"isTypes"in(l?.[0]??{})})){let f=l[0];return"defaultValue"in f?c(o,f):"notTypes"in f?a(o,f):n(o,...[f.isTypes].flat())}let d=typeof o=="symbol"?Symbol.isSymbol:o;return l.length>1?w(d,...l):s(o,...l)}function i(o){return o?.[Symbol.proxy]??n(o)}function s(o,...l){let{noInput:d,noShouldbe:f,compareTo:h,inputCTOR:A,isNaN:R,isInfinity:k,shouldBeFirstElementIsNothing:j}=S(o,...l);switch(l=l.length&&l[0],!0){case j:return String(o)===String(h);case(o?.[Symbol.proxy]&&f):return o[Symbol.proxy];case R:return f?"NaN":r({trial:J=>String(h)})===String(o);case k:return f?"Infinity":r({trial:J=>String(h)})===String(o);case d:return f?String(o):String(h)===String(o);case A===Boolean:return l?A===l:"Boolean";default:return y(o,l,f,m(o,A))}}function m(o,l){return o===0?Number:o===""?String:o?l:{name:String(o)}}function S(o,...l){let d=l.length<1,f=!d&&l[0],h=!d&&x(l[0]),A=o==null,R=!A&&Object.getPrototypeOf(o)?.constructor,k=r({trial:J=>String(o)})==="NaN",j=r({trial:J=>String(o)})==="Infinity";return{noInput:A,noShouldbe:d,compareTo:f,inputCTOR:R,isNaN:k,isInfinity:j,shouldBeFirstElementIsNothing:h}}function y(o,l,d,f){switch(!0){case(!d&&l===o||o?.[Symbol.proxy]&&l===Proxy):return!0;case r({trial:h=>String(l)})==="NaN":return String(o)==="NaN";case(o?.[Symbol.toStringTag]&&n(l,String)):return String(l)===o[Symbol.toStringTag];default:return l?r({trial:h=>o instanceof l})||l===f||l===Object.getPrototypeOf(f)||`${l?.name}`===f?.name:o?.[Symbol.toStringTag]&&`[object ${o?.[Symbol.toStringTag]}]`||f?.name||String(f)}}function w(o,...l){return l.some(d=>n(o,d))}function x(o,l=!1){let d=o==null;return d=l?d||n(o,1/0)||n(o,NaN):d,d}function L(){let o=(l,d)=>l?.constructor===Function?l(d):void 0;return function({trial:l,whenError:d=()=>{}}={}){try{return o(l)}catch(f){return o(d,f)}}}function g(){return function(o){return Object.freeze({get value(){return o},get[Symbol.type](){return i(o)},get type(){return i(o)},[Symbol.is](...l){return n(o,...l)},is(...l){return n(o,...l)}})}}function c(o,{defaultValue:l,isTypes:d=[void 0],notTypes:f}={}){return d=d?.constructor!==Array?[d]:d,f=f&&f?.constructor!==Array?[f]:[],f.length<1?n(o,...d)?o:l:a(o,{isTypes:d,notTypes:f})?o:l}function a(o,{isTypes:l=[void 0],notTypes:d=[void 0]}={}){return l=l?.constructor!==Array?[l]:l,d=d?.constructor!==Array?[d]:d,n(o,...l)&&!n(o,...d)}function p(){Object.getOwnPropertyDescriptors(Object.prototype)[Symbol.is]||(Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return i(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...o){return n(this,...o)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(o){return i(o)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(o,...l){return n(o,...l)},enumerable:!1,configurable:!1}}))}function b(o){let l=String(Object.getPrototypeOf(o)?.constructor);return l.slice(l.indexOf("ion")+3,l.indexOf("(")).trim()}function v(o){let l=o.set;return o.set=(d,f,h)=>f===Symbol.proxy?d[f]=h:l(d,f,h),o}function $(){let o=Proxy;return{native(){Proxy=o},custom(){Proxy=new o(o,{construct(l,d){for(let h of d)h.set&&(h=v(h));let f=new l(...d);return f[Symbol.proxy]=`Proxy (${b(d[0])})`,f}})}}}}var _=yt;function yt({styleSheet:r,createWithId:e}={}){let{tryParseAtOrNestedRules:t,ruleExists:n,checkParams:i,sheet:s,removeRules:m,consider:S,currentSheetID:y}=bt({styleSheet:r,createWithId:e});function w(a,p){if(a&&p.removeProperties){Object.keys(p.removeProperties).forEach(b=>a.style.removeProperty(Me(b)));return}Object.entries(p).forEach(([b,v])=>{b=Me(b.trim()),v=v.trim();let $;if(/!important/.test(v)&&(v=v.slice(0,v.indexOf("!important")).trim(),$="important"),!CSS.supports(b,v))return console.error(`StylingFactory ${y} error: '${b}' with value '${v}' not supported (yet)`);Ie(()=>a.style.setProperty(b,v,$),`StylingFactory ${y} (setRule4Selector) failed`)})}function x(a,p,b=s){if(a=a?.trim?.(),!te(a,String)||!a.length||/[;,]$/g.test(a))return console.error(`StylingFactory ${y} (setRules): [${a||"[no selector given]"}] is not a valid selector`);if(p.removeRule)return m(a);let v=n(a,!0),$=v||b.cssRules[b.insertRule(`${a} {}`,b.cssRules.length||0)];return S(()=>w($,p),a,v)}function L(a){let p=a.trim().split(/{/,2),b=p.shift().trim();if(!te(b,String)||!b?.trim()?.length)return console.error(`StylingFactory ${y} (doParse): no (valid) selector could be extracted from rule ${Se(a)}`);let v=Lt(p.shift());return Ie(()=>x(b,v),`StylingFactory ${y} (setRules) failed`)}function g(a){let p=t(a);return p.done?p.existing:L(a)}function c(a,p){return a.trim().startsWith("@media")?g(ht(a,p)):x(a,p)}return function(a,p={}){return i(a,p)&&(Object.keys(p).length?c(a,p):g(a))}}function bt({styleSheet:r,createWithId:e}){let t="Note: The rule or some of its properties may not be supported by your browser (yet)",n=`for style#${e}`;r=e?i(e):r;function i(g){let c=document.querySelector(`#${g}`)?.sheet;if(c)return c;let a=Object.assign(document.createElement("style"),{id:g});return document.head.insertAdjacentElement("beforeend",a),a.sheet}function s(g){return console.error(`StylingFactory ${n} [rule: ${g}]
    => @charset, @namespace and @import are not supported here`),{done:!0}}function m(g,c){return[...r.rules].find(a=>c?Re(a.selectorText||"",g):vt`${xt(g)}${[..."gim"]}`.test(a.cssText))}function S(g){return/^@charset|@import|namespace/i.test(g.trim())?s(g):g.match(/}/g)?.length>1?{existing:x(g,1),done:!0}:{done:!1}}function y(g){let c=[...r.cssRules].reduce((p,b,v)=>Re(b.selectorText||"",g)&&p.concat(v)||p,[]),a=c.length;return c.forEach(p=>r.deleteRule(p)),a>0?console.info(`\u2714 Removed ${a} instance${a>1?"s":""} of selector ${g} from ${n.slice(4)}`):console.info(`\u2714 Remove rule: selector ${g} does not exist in ${n.slice(4)}`)}function w(g,c){return g&&te(g,String)&&g.trim().length>0&&te(c,Object)||(console.error(`StylingFactory ${n} called with invalid parameters`),!1)}function x(g){g=g.trim();let c=g.slice(0,g.indexOf("{")).trim(),a=!!m(c);try{return r.insertRule(`${g}`,r.cssRules.length),a}catch(p){return console.error(`StylingFactory ${n} (tryParse) ${p.name} Error:
${p.message}
Rule: ${Se(g)}
${t}`),a}}function L(g,c,a){try{return g(),a}catch(p){return console.error(`StylingFactory ${n} (tryAddOrModify) ${p.name} Error:
${p.message}
Rule: ${Se(c)}
${t}`),a}}return{sheet:r,removeRules:y,tryParseAtOrNestedRules:S,ruleExists:m,checkParams:w,tryParse:x,consider:L,currentSheetID:n}}function ht(r,e){return`${r.trim()} ${Object.entries(e).map(([t,n])=>`${t}: { ${St(n)}`)}`}function Se(r){let e=(r||"NO RULE").trim().slice(0,50).replace(/\n/g,"\\n").replace(/\s{2,}/g," ");return r.length>e.length?`${e.trim()}...truncated`:e}function St(r){return Object.entries(r).map(([e,t])=>`${e}: ${t.trim()}`).join(`;
`)}function xt(r){return r.replace(/([*\[\]()-+{}.$?\\])/g,e=>`\\${e}`)}function vt(r,...e){let t=e.length&&Array.isArray(e.slice(-1))?e.pop().join(""):"";return new RegExp((e.length&&r.raw.reduce((n,i,s)=>n.concat(e[s-1]||"").concat(i),"")||r.raw.join("")).split(`
`).map(n=>n.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),t)}function Me(r){return r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/[^--]^-|-$/,"")}function Ie(r,e){try{return r()}catch(t){console.error(`${e||"an error occured"}: ${t.message}`)}}function Et(r){return r.replace(/\/\*.+?\*\//gm,"").replace(/[}{\r\n]/g,"").replace(/(data:.+?);/g,(e,t)=>`${t}\\3b`).split(";").map(e=>e.trim()).join(`;
`).replaceAll("\\3b",";").split(`
`)}function wt(r){return r.reduce((e,t)=>{let[n,i]=[t.slice(0,t.indexOf(":")).trim(),t.slice(t.indexOf(":")+1).trim().replace(/;$|;.+(?=\/*).+\/$/,"")];return n&&i?{...e,[n]:i}:e},{})}function Lt(r){return wt(Et(r))}function Re(r,e){return r?.replace("::",":")===e?.replace("::",":")}var xe=!1,Ft={on:()=>xe=!0,off:()=>xe=!1},P={tagsRaw:W,allowUnknownHtmlTags:Ft,isAllowed(r){if(xe)return!0;let e=u(r,String)?r.toLowerCase():r?.nodeName.toLowerCase()||"none";return e==="#text"||!!W[e]},allowTag:r=>W[r.toLowerCase()]=!0,prohibitTag:r=>W[r.toLowerCase()]=!1};var Ct=!0,re={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/^javascript|injected|noreferrer|alert|DataURL/gi};function Tt(r){if(Ct&&Object.keys(r.removed).length){let e=Object.entries(r.removed).reduce((t,[n,i])=>[...t,`${M(n)} => ${i}`],[]).join("\\000A");F.error(`JQx: HTML creation error(s): ${e}`)}}function $t(r){let e=r.nodeName.toLowerCase(),t=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return/-/.test(e)&&!t.find(n=>n===e)||P.isAllowed(e)}function B(r){let e={rawHTML:r?.parentElement?.getHTML()??"no html",removed:{}};return u(r,HTMLElement)&&[...r.childNodes].forEach(t=>{if(t?.children?.length&&B(t),t?.attributes){let i=u(t,SVGElement)?z.svg:z.html;[...(t??{attributes:[]}).attributes].forEach(s=>{let m=s.name.trim().toLowerCase(),S=s.value.trim().toLowerCase().replace(re.whiteSpace,""),y=m==="href"?!re.validURL.test(S):re.notAllowedValues.test(S),w=m.startsWith("data")?!re.data.test(m):!!i[m];if(y||w){let x=ne(s.value||"none",60);x+=x.length===60?"...":"",e.removed[`${s.name}`]=`attribute/property/value not allowed, removed. Value: ${x}`,t.removeAttribute(s.name)}})}if(!($t(t)||t.constructor===CharacterData||t.constructor===Comment)){let i=(t?.outerHTML||t?.textContent).trim(),s=ne(i,60)??"EMPTY";s+=s.length===60?"...":"",e.removed[`<${t.nodeName?.toLowerCase()}>`]=`not allowed, not rendered. Value: ${s}`,t.remove()}}),Tt(e),r}function At(r){let e=document.createElement("div");return e.insertAdjacentHTML(T.end,r),e.childNodes.length?B(e):void 0}function Dt(r,e,t){return u(r,Comment)?e.insertAdjacentHTML(t,`<!--${r.data}-->`):e.insertAdjacentText(t,r.data)}function Q(r=[],e=document.body,t=T.BeforeEnd){return t=t||T.BeforeEnd,e=e?.isJQx?e.node:e||document.body,r.reduce((n,i)=>{let s=O(i)&&Ht(i,e,t);return s?[...n,s]:n},[])}function Ht(r,e=document.body,t=T.BeforeEnd){return t=t||T.BeforeEnd,e=e?.isJQx?e?.[0]:e,u(r,Comment,Text)?Dt(r,e,t):u(r,HTMLElement)?e.insertAdjacentElement(t,r):void 0}function D(r){if(u(r,Text,Comment))return r;let e=r?.trim(),t=e?.split(/<text>|<\/text>/i)??[];if(t?.length&&(t=t.length>1?t.filter(i=>i.length).shift():void 0),e.startsWith("<!--")&&e.endsWith("-->"))return document.createComment(r.replace(/<!--|-->$/g,""));if(t||!/^<(.+)[^>]+>/m.test(e))return document.createTextNode(t);let n=At(r);return n.childNodes.length<1?D(`<span data-jqxcreationerror="1">${H(r,60)}</span>`):n.children[0]}function oe(r){if(r.node("#jqxPopup"))return;r.logger.log("JQx: [JQx].Popup first call. Dialog element created."),r.dialog({id:"jqxPopup"},r.div({id:"jqxPopupContent"})).render,r.editCssRules(...De);let[e,t]=[r("#jqxPopupContent"),r.node("#jqxPopup")],n={};return r.handle({type:"click, keydown",handlers:x,name:"genericPopupCloseHandler",capture:!0,about:"A generic handler for JQx popups"}),Object.freeze({show:i,remove:s,removeModal:w});function i(c){if(t.open)switch(!0){case m(c):return;default:return s(),setTimeout(()=>i(c),200)}n={...c};let{content:a}=n;return r.IS(a,String,HTMLElement)||a?.isJQx?S():!0}function s(){return n.modal?g(n.warnMessage):y()}function m(c){for(let[a,p]of Object.entries(n))if(p!==c[a])return!1;return!0}function S(){e.clear();let{content:c,modal:a,closeAfter:p}=n;a=r.IS(a,Boolean)?a:!1;let b=a?"":r.div({id:"closeHandleIcon"});e.append(b,r.IS(c,String)?r.div(c):c),t.showModal(),!a&&r.IS(p,Number)&&L(s,p)}function y(){if(t.close(n.returnValue),r.IS(n.callback,Function))return setTimeout(()=>n.callback(n.returnValue),200);n={}}function w({callback:c,value:a}={}){n.returnValue=a,n.modal=!1,n.callback=c||n.callback,s()}function x({evt:c}){if(!(Object.keys(n).length<1||!t.open))return c.key==="Escape"&&c.preventDefault(),n.activeTimer&&clearTimeout(n.activeTimer),(c.target.closest("#closeHandleIcon")||!c.target.closest("#jqxPopupContent"))&&s(),!0}function L(c,a){r.IS(c,Function)&&r.IS(a,Number)&&a>0&&(n.activeTimer=setTimeout(c,a*1e3))}function g(c){if(!r.IS(c,String,HTMLElement,Proxy))return;let a=e.find$(".warn");switch(!0){case a.is.empty:a=r.div({class:"warn"},c);default:e.append(a.addClass("active")),L(()=>e.find$(".warn").removeClass("active"),2)}}}function ie(r){let e={},t={},n="anonymous_";function i(c){if(c){let{handler:a,capture:p,type:b}=c;document.addEventListener(b,a,{capture:p})}}function s(c){if(c){let{type:a,handler:p,capture:b}=c;document.removeEventListener(a,p,{capture:b})}}function m(c,a,p,b){return function(v){if(!C(a))return c({evt:v});let $=v.target.closest(a);if($){let o=r($);c({self:o,me:o,evt:v}),p&&x(v.type,b)}return!0}}function S(){let c=`${n}${Math.random().toString(36).slice(2)}`;return t[c]?S():c}function y(c){return e[c]=e[c]||{},e[c]}function w(c,a){return Object.entries(y(c)).find(([p])=>p===a)}function x(c,a){let p=w(c,a);p&&(s(p[1]),delete e[c][a],delete t[a],Object.keys(e[c]).length<1&&delete e[c],console.warn(`Removed listener [${a}] for event type [${c}].`))}function L(c){return!/handler/i.test(c)&&c}function g(c){let{eType:a,handler:p,name:b,capture:v,once:$,selector:o,node:l,about:d}=c;e[a]=e[a]||{};let f=L(p.name)||b;if(f||(f=S()),l instanceof HTMLElement){let h=l.dataset.hid||f;l.dataset.hid=h,o=`[data-hid=${h}]`}switch(!0){case!e[a][f]:return t[f]=1,e[a][f]={name:f,handler:m(p,o,$,f),capture:ke(a,v),once:!!$,type:a,selector:!!o&&o||!1,about:!!d&&d||!1,unListen(){x(a,f)}},e[a][f];default:return console.error(`The name [${f}] for [${a}] exists. Use unique (function) names.`)}}return{remove(...c){return x(...c)},listen(c){let{eType:a,handler:p}=c;if(!C(a)||!r.IS(p,Function))return;let b=g(c);if(b)return i(b),{name:b.name,type:a,unListen(){x(a,b.name)}}},get ListenerStore(){return Object.freeze({...e})}}}var F=Ot(),Nt=["load","unload","scroll","focus","blur","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","loadstart","progress","error","abort","load","loadend","pointerenter","pointerleave","readystatechange"],T=Object.freeze(new Proxy({start:"afterbegin",afterbegin:"afterbegin",end:"beforeend",beforeend:"beforeend",before:"beforebegin",beforebegin:"beforebegin",after:"afterend",afterend:"afterend"},{get(r,e){return r[String(e).toLowerCase()]??r[e]}})),Pt=[...Array(26)].map((r,e)=>String.fromCharCode(e+65)).concat([...Array(26)].map((r,e)=>String.fromCharCode(e+97))).concat([...Array(10)].map((r,e)=>`${e}`)),Ee=Object.freeze({get(r,e){return r[Z(e)]||r[e]},enumerable:!1,configurable:!1});function ke(r,e){return!!Nt.find(t=>t===r)||!!e}function se(r){return r.startsWith("data")||z.html.find(e=>r.toLowerCase()===e)}function ae(r){return r&&(r.textContent="")}function U(r,e=0,t=!0){return r=r?.parentElement,e+=r?r[t?"scrollTop":"scrollLeft"]:0,r?U(r,e,t):e}function C(r,e=1){return e=u(e,Number)&&e||1,u(r,String)&&r.length>=e}function ne(r,e=120){return H(r,e).replace(/&lt;/g,"<")}function H(r,e=120){return`${r}`.trim().slice(0,e).replace(/>\s+</g,"><").replace(/</g,"&lt;").replace(/\s{2,}/g," ").replace(/\n/g,"\\n")+(r.length>e?" &hellip;":"").trim()}function M(r){switch(!0){case u(r,String):let e=document.createElement("div");return e.append(r),e.innerHTML;default:return r}}function je(r){return u(r,String)&&Object.assign(document.createElement("textarea"),{innerHTML:r}).textContent||r}function Ot(){let r=!1,e=[],t={get on(){return r=!0,t},get off(){return r=!1,t},get backLog(){return e}};function n(...s){return e.unshift(...s.map(m=>`${ve()} \u2A3B ${je(m)}`)),console.error(e.slice(0,s.length).join(`
`)),t}function i(...s){switch(e.unshift(...s.map(m=>`${ve()} \u2714 ${je(m)}`)),r){case!0:console.log(e.slice(0,s.length).join(`
`));default:return t}}return Object.defineProperties(t,{log:{value:i,enumerable:!1},error:{value:n,enumerable:!1}}),Object.freeze(t)}function ve(){return(r=>`[${le(r.getHours())}:${le(r.getMinutes())}:${le(r.getSeconds())}.${le(r.getMilliseconds(),3)}]`)(new Date)}function we(r,e){if(r)for(let[t,n]of Object.entries(e)){if(t=N(t),t.startsWith("data"))return ce(r,n);u(n,String)&&se(t)&&r.setAttribute(t,n.split(/[, ]/)?.join(" "))}}function ce(r,e){if(r&&u(e,Object))for(let[t,n]of Object.entries(e))r.setAttribute(`data-${N(t)}`,n)}function ue(r){return r?u(r,Proxy)?[r.EL]:u(r,NodeList)?[...r]:O(r)?[r]:X(r)?r:r.isJQx?r.collection:void 0:[]}function fe(r,e){return r.andThen(e)}function de(r,e){return r.andThen(e,!0)}function O(r){return u(r,Text,HTMLElement,Comment)}function G(r,e){if(u(e,Object))for(let[t,n]of Object.entries(e)){let i;/!important/i.test(n)&&(n=n.slice(0,n.indexOf("!")).trim(),i="important"),r.style.setProperty(N(t),n,i)}}function I(r){let e=r.cloneNode(!0);return e.removeAttribute&&e.removeAttribute("id"),r.isConnected?r.remove():r=null,e}function Je(r){if(!r)return;let e=r.style,t=getComputedStyle(r),n=[e.visibility,t.visibility].includes("hidden"),i=[e.display,t.display].includes("none"),s=r.offsetTop<0||r.offsetLeft+r.offsetWidth<0||r.offsetLeft>document.body.offsetWidth,m=+t.opacity==0||+(e.opacity||1)==0;return!(s||m||i||n)}function Be(r){return[...r.parentNode.querySelectorAll(":is(:read-write)")].find(e=>e===r)??!1}function me(r){return r?.filter(e=>e).reduce((e,t)=>e.concat(Fe(t)?`<!--${t.data}-->`:pe(t)?t.textContent:t.outerHTML),"")}function le(r,e=2){return`${r}`.padStart(e,"0")}function Qe(r,e=0){return[r,e]=[Math.floor(r),Math.ceil(e)],Math.floor([...crypto.getRandomValues(new Uint32Array(1))].shift()/2**32*(r-e+1)+e)}function ge(){return`_${Mt(Pt).slice(0,8).join("")}`}function Le(r){return r=u(r,String)&&/,/.test(r)?r.split(","):r,u(r,Array)?r.filter(e=>C(e)).map(e=>e.trim().toLowerCase()):u(r,String)&&r?.trim().toLowerCase()||""}function ze(r){return[...r.parentNode.querySelectorAll(":is(:modal)")].find(e=>e===r)??!1}function Mt(r){let e=r.length;for(;e--;){let t=Qe(e);[r[e],r[t]]=[r[t],r[e]]}return r}function Z(r){return u(r,String)?r.toLowerCase().split("-").map((e,t)=>t&&`${It(e)}`||e).join(""):r}function N(r){return r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/^-|-$/,"")}function It([r,...e]){return`${r.toUpperCase()}${e.join("")}`}function pe(r){return u(r,Comment,Text)}function Fe(r){u(r,Comment)}function We(r){return u(r,Text)}function Y(r){return u(r,String)&&/^<|>$/.test(`${r}`.trim())}function X(r){return u(r,Array)&&!r?.find(e=>!O(e))}function ye(r){return u(r,Array)&&!r?.find(e=>!Y(e))}function E(r,e){let t=r.collection.filter(n=>!pe(n));for(let n=0;n<t.length;n+=1)e(t[n],n);return r}function Ce(r,e,t){let n=e!==document.body&&u(r,String)&&r.toLowerCase()!=="body"?e:document,i;try{t.collection=[...n.querySelectorAll(r)]}catch{i=`Invalid CSS querySelector. [${u(r,String)?r:"Nothing valid given!"}]`}let s=t.collection.length;return s<1?`CSS querySelector "${r}", output: nothing`:i??`CSS querySelector "${r}", output ${s} element${s>1?"s":""}`}function Rt(r){let e=`anonymous_${Math.random().toString(36).slice(2)}`;return r.data.add({hid:e}),`[data-hid="${e}"]`}function Ve(){return{isCommentOrTextNode:pe,isNode:O,isComment:Fe,isText:We,isHtmlString:Y,isArrayOfHtmlElements:X,isArrayOfHtmlStrings:ye,ElemArray2HtmlString:me,input2Collection:ue,setCollectionFromCssSelector:Ce,addHandlerId:Rt,cssRuleEdit:_({createWithId:"JQxStylesheet"})}}function _e(){let e=Object.freeze({notInDOM:!0,writable:"n/a",modal:"n/a",empty:!0,open:"n/a",visible:"n/a"});return t=>{let n=t.node;return u(n,Node)?Object.freeze({get writable(){return Be(n)},get modal(){return ze(n)},get inDOM(){return n.isConnected},get open(){return n.open??!1},get visible(){return Je(n)},get disabled(){return n.hasAttribute("readonly")||n.hasAttribute("disabled")},get empty(){return t.collection.length<1},get virtual(){return t.isVirtual}}):e}}function Ue(r,e,t,n){t&&u(e,String)&&(e={[e]:t==="-"?"":t});let i;e.className&&(i=e.className,delete e.className),i=[...r.classList].find(m=>m.startsWith("JQxClass-")||i&&m===i)||i||`JQxClass-${ge().slice(1)}`,n.editCssRule(`.${i}`,e),r.classList.add(i)}var kt=_e();function Ge(r){return{factoryExtensions:jt(r),instanceExtensions:Jt(r)}}function jt(r){return{data:e=>({get all(){return new Proxy(e[0]?.dataset??{},Ee)},set:(t={})=>{if(!e.is.empty&&u(t,Object))for(let[n,i]of Object.entries(t))e.setData({[n]:i});return e},get:(t,n)=>e.data.all[t]??n,add:(t={})=>{if(!e.is.empty&&u(t,Object))for(let[n,i]of Object.entries(t))e.setData({[n]:i});return e},remove:t=>(e[0]?.removeAttribute(`data-${N(t)}`),e)}),dimensions:e=>{if(e.is.empty)return{error:"[instance].dimensions: NO ELEMENTS"};let t=e[0],n=e.first()?.getBoundingClientRect().toJSON();return n.scrollTopDistance=U(t,0),n.scrollLeftDistance=U(t,0,!1),n},node:e=>e[0],HTML:e=>({get:(t,n)=>{if(e.is.empty)return"NO ELEMENTS IN COLLECTION";let i=t?e.outerHtml:e.html();return n?M(i):i},set:(t,n=!1,i=!1)=>{t=t.isJQx?t.HTML.get(1):t;let s=u(t,String);return t=s&&i?M(t):t,s&&(t||"").trim().length&&e.html(t,n),e},replace:(t,n=!1)=>e.HTML.set(t,!1,n),append:(t,n=!1)=>(t=u(t,HTMLElement)?r(t).HTML.get(1):t.isJQx?t.HTML.get(1):t,e.HTML.set(t,!0,n)),insert:(t,n=!1)=>(t=u(t,HTMLElement)?r(t).HTML.get(1):t.isJQx?t.HTML.get(1):t,e.HTML.set(t+e.HTML.get(),!1,n))}),is:e=>kt(e),length:e=>e.collection.length,outerHtml:e=>(e.first()||{outerHTML:void 0}).outerHTML,parent:e=>{let t=r(e[0]?.parentNode);return t.is.empty?e:t},render:e=>(!e.is.empty&&e.toDOM()||r.log("[JQx.render]: empty collection"),e),Style:e=>({get computed(){return e.is.empty?{}:getComputedStyle(e[0])},inline:t=>e.style(t),inSheet:t=>e.css(t),valueOf:t=>e.is.empty?void 0:getComputedStyle(e[0])[N(t)],nwRule:t=>e.Style.byRule({rules:t}),byRule:({classes2Apply:t=[],rules:n=[]}={})=>{let s=u(n,String)&&!t.length?n.split("{")[0].trim():"";if(n=n&&u(n,String)?[n]:n,t=t&&u(t,String)?[t]:t,(n?.length||t?.length)&&(n?.length&&r.editCssRules(...n),t))for(let m of t)e.addClass(m);return s?.startsWith(".")&&e.addClass(s.slice(1)),s?.startsWith("#")&&!e.attr("id")&&e.prop({id:s.slice(1)}),e}})}}function Jt(r){return{addClass:(e,...t)=>E(e,n=>n&&t.forEach(i=>n.classList.add(i))),after:fe,afterMe:fe,andThen:(e,t,n=!1)=>{if(!t||!u(t,String,Node,Proxy))return F.log(`[JQx instance].[beforeMe | afterMe | andThen]: insufficient input [${t}]`),e;t=t?.isJQx?t.collection:u(t,Node)?r.virtual(t).collection:r.virtual(D(t)).collection;let[i,s,m]=n?[0,"before",t.concat(e.collection)]:[e.collection.length-1,"after",e.collection.concat(t)];return e[i][s](...t),e.collection=m,e},append:(e,...t)=>{if(!e.is.empty&&t.length){let n=e.length===1;for(let i of t){if(!i.isJQx&&C(i)){let s=i.trim(),S=!/^<(.+)[^>]+>$/m.test(s)?r.text(i):D(i);E(e,y=>y.append(n?S:I(S)))}O(i)&&E(e,s=>s.append(n?i:I(i))),i.isJQx&&!i.is.empty&&E(e,s=>i.collection.forEach(m=>s.append(n?m:I(m))))}}return e},appendTo:(e,t)=>(t.isJQx||(t=r(t)),t.append(e),e),attr:(e,t,n)=>{let i=e[0];if(!i)return e;if(!n&&C(t))return t=N(t),t==="class"?[...i?.classList].join(" "):i?.getAttribute(t);if(C(t)&&n)switch(t=N(t),!0){case t.startsWith("data-"):t={data:{[t.replace("data-","")]:n}};break;default:t={[t]:n}}return u(t,Object)&&!e.is.empty&&we(i,t),e},before:de,beforeMe:de,clear:e=>E(e,ae),closest:(e,t)=>{let n=C(t)?e[0].closest(t):null;return n?r(n):e},computedStyle:(e,t)=>e.first()&&getComputedStyle(e.first())[t],css:(e,t,n)=>E(e,i=>Ue(i,t,n,r)),duplicate:(e,t=!1,n=document.body)=>{if(e.collection.length>0){let i=e.collection[0].cloneNode(!0);return i.childNodes.forEach(s=>{s.removeAttribute&&s?.removeAttribute("id")}),t?r(i).toDOM(n):r.virtual(i)}return F.error("Duplicating an empty JQx instance is not possible"),e},each:(e,t)=>E(e,t),empty:e=>E(e,ae),find:(e,t)=>e.collection.length>0?[...e.first()?.querySelectorAll(t)]:[],find$:(e,t)=>e.collection.length>0?r(t,e):e,first:(e,t=!1)=>{if(e.collection.length>0)return t?e.single():e.collection[0]},first$:(e,t)=>e.single(t),getData:(e,t,n)=>e.first()&&e.first().dataset?.[t]||n,hasClass:(e,...t)=>{let n=e[0];return!n||!n.classList.length?!1:t.find(i=>n.classList.contains(i))&&!0||!1},hide:e=>E(e,t=>G(t,{display:"none !important"})),html:(e,t,n)=>{if(t===void 0){let i=e.node;return i?.getHTML&&i.getHTML()||""}if(!e.isEmpty()){let i=D(`<div>${t.isJQx?t.HTML.get(!0):t}</div>`);if(!u(i,Comment))return E(e,m=>(n||(m.textContent=""),m.insertAdjacentHTML(r.at.end,i.getHTML())))}return e},htmlFor:(e,t,n="",i=!1)=>{if(t&&e.collection.length){if(!t||!C(n))return e;let s=e.find$(t);if(s.length<1)return e;let m=D(`<span>${n}</span>`);s.each(S=>{i||(S.textContent=""),S.insertAdjacentHTML(r.at.end,m?.getHTML())})}return e},isEmpty:e=>e.collection.length<1,nth$:(e,t)=>e.single(t),on:(e,t,...n)=>{if(e.collection.length&&u(t,String,Array)){if(!C(t)||n.length<1)return e;r.handle({type:t,node:e.node,handlers:n})}return e},prepend:(e,...t)=>{if(!e.is.empty&&t){let n=e.length===1;for(let i of t){if(C(i)){i=i.trim();let m=!/^<(.+)[^>]+>$/m.test(i)?r.text(i):D(i);m=n?m:I(m),E(e,S=>S.prepend(m.cloneNode(!0)))}O(i)&&E(e,s=>s.prepend(n?i:I(i))),i.isJQx&&!i.is.empty&&(i.collection.length>1&&i.collection.reverse(),E(e,s=>E(i,m=>s.prepend(n?m:I(m)))),i.collection.reverse())}}return e},prependTo:(e,t)=>(t.isJQx||(t=r.virtual(t)),t.prepend(e),e),prop:(e,t,n)=>{if(u(t,String)&&!n)return t.startsWith("data")?e[0]?.dataset[t.slice(t.indexOf("-")+1)]:e[0]?.[t];let i=u(t,Object)?t:{[t]:n};for(let[s,m]of Object.entries(i)){if(s=s.trim(),m&&!se(s)||!m)return!1;if(s.toLowerCase()==="id")return e[0].id=m;E(e,y=>{if(s.startsWith("data"))return y.dataset[s.slice(s.indexOf("-")+1)]=m;y[s]=m})}return e},remove:(e,t)=>{F.log(`remove ${H(e.HTML.get(1),40)}${t?` /w selector ${t}`:""}`);let n=s=>s.remove(),i=()=>e.collection=e.collection.filter(s=>document.documentElement.contains(s));if(t){let s=e.find$(t);return s.is.empty||(E(s,n),i()),e}return E(e,n),i(),e},rmAttr:(e,...t)=>{for(let n of t)e.node.removeAttribute(n);return e},removeClass:(e,...t)=>E(e,n=>{if(n)for(let i of t)n.classList.remove(i)}),renderTo:(e,t=document.body,n=r.at.end)=>(e.first$().toDOM(t,n),e),replace:(e,t,n)=>{let i=e[0];return!t||!n||!u(n,HTMLElement)&&!n.isJQx?(console.error("JQx replace: invalid replacement value"),e):(n.isJQx&&(n=n[0]),u(n,NodeList)&&(n=n[0]),i&&t&&(t=u(t,String)?i.querySelectorAll(t):t.isJQx?t.collection:t,u(t,HTMLElement,NodeList,Array)&&u(n,HTMLElement)&&(u(t,HTMLElement)?[t]:[...t]).forEach(s=>s.replaceWith(n.cloneNode(!0)))),e)},replaceClass:(e,t,...n)=>E(e,i=>{i.classList.remove(t);for(let s of n)i.classList.add(s)}),replaceMe:(e,t)=>e.replaceWith(t),replaceWith:(e,t)=>(t=u(t,Element)?t:t.isJQx?t[0]:void 0,t&&(e[0].replaceWith(t),e=r.virtual(t)),e),setData:(e,t)=>E(e,n=>ce(n,t)),show:e=>E(e,t=>G(t,{display:"revert-layer !important"})),single:(e,t)=>e.collection.length>0?u(t,String)?e.find$(t):u(t,Number)?r(e.collection[t]):r(e.collection[0]):e,style:(e,t,n)=>E(e,s=>{n&&u(t,String)&&(t={[t]:n||"none"}),G(s,t)}),text:(e,t,n=!1)=>e.isEmpty()?e:u(t,String)?E(e,s=>s.textContent=n?s.textContent+t:t):e.first().textContent,toDOM:(e,t=document.body,n=T.BeforeEnd)=>(e.isVirtual&&(e.isVirtual=!1),Q(e.collection,t,n),e),toggleClass:(e,t)=>E(e,n=>n.classList.toggle(t)),toNodeList:e=>[...e.collection].map(t=>document.importNode(t,!0)),trigger:(e,t,n=Event,i={})=>{if(e.collection.length){let s=new n(t,{...i,bubbles:i.bubbles??!0});for(let m of e.collection)m.dispatchEvent(s)}return e},val:(e,t)=>{let n=e[0];return!n||!u(n,HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement)?e:t===void 0?n.value:(n.value=u(t,String)?t:"",e)}}}var Te,be,{isComment:Vr,isText:_r,isHtmlString:Ur,isArrayOfHtmlElements:Gr,isArrayOfHtmlStrings:Zr,ElemArray2HtmlString:Yr,addHandlerId:Xr,cssRuleEdit:$e,addFn:Bt}=Qt();function Qt(){return{...Ve(),addFn:function(r,e){return F.log(`JQx: added extension function [${r}]`),be[r]=(t,...n)=>e(t,...n)}}}function K(r){return new Proxy(r,Object.freeze({get:(e,t)=>zt(e,t,r)}))}function Ze(r,e){return(...t)=>u(r,Function)&&r(K(e),...t)}function zt(r,e,t){switch(!0){case u(e,Symbol):return r;case u(+e,Number):return r.collection?.[e]||void 0;case e in Te:return Ze(Te[e],t)();case e in be:return Ze(be[e],t);default:return r[e]}}function Ke(r){let e=Gt(r);for(let[t,n]of Object.entries(Object.getOwnPropertyDescriptors(e)))Object.defineProperty(r,t,n);return r}function Wt(r){return{allow:e=>{let t=/-/.test(e),n=t&&e;e=t?Z(e):e.toLowerCase(),P.allowTag(e),u(r[e],Function)||Object.defineProperties(r,Ae(e,!0,r,n))},prohibit:e=>{e=e.toLowerCase(),P.prohibitTag(e),u(r[e],Function)&&Object.defineProperties(r,Ae(e,!1,r))}}}function Ye(...r){if(r.length===1){let e=String(r.shift().trim());r=e.startsWith("!")?[e.slice(1,-1)]:e.split(",").map(t=>t.trim())}for(let e of r.map(t=>t.startsWith("!")?t.slice(1,-1):t))$e(e,{removeRule:1})}function Vt(r){return function(e,t,n){t=t?.isJQx?t?.[0]:t,n=n&&Object.values(T).find(s=>n===s);let i=r(e,document.createElement("br"));if(t&&!u(t,HTMLBRElement))for(let s of i.collection)n?t.insertAdjacentElement(n,s):t.append(s);return i}}function _t(...r){let e={};for(let t of r){let n=Object.getOwnPropertyDescriptors(t);for(let[i,s]of Object.entries(n))!(i in e)&&Object.defineProperty(e,i,{...s,enumerable:!1})}return e}function Ut(r,e,t,n){return r=N(n||r.toLowerCase()),{get(){return(...i)=>e&&t.virtual(B(ee[r](...i)))},enumerable:!1,configurable:!0}}function Ae(r,e,t,n){r=r.toLowerCase();let i=Ut(r,e,t,n);return n?{[n]:i,[Z(n)]:i}:{[r]:i,[r.toUpperCase()]:i}}function Gt(r){return _t(Object.entries(P.tagsRaw).reduce(Zt(r),{}),tr(r))}function Zt(r){return function(e,[t,n]){return n&&Object.defineProperties(e,Ae(t,n,r)),e}}function Yt(r){return function(e,t,...n){u(t,Function)&&(n.push(t),t=void 0),r({type:e,selector:t,handlers:n})}}function Xt(r){return function(e){let{type:t,origin:n,selector:i,handlers:s,node:m,name:S,capture:y,once:w,about:x}=e,L=Le(t),g=S;s=u(s,Function)?[s]:s;let c={eType:L,selector:i||n,capture:y,name:g,once:w,node:m,about:x};switch(!0){case(u(L,Array)&&L.length>0):for(let a of L)c.eType=a,Xe(s,c,r);break;default:return Xe(s,c,r)}}}function Xe(r,e,t){for(let n of r)t.listen({...e,handler:n})}function Kt(r){return function(e,t){return t=C(t)&&t,e=C(e)&&e,t&&e&&r.listenerStore[e][t]}}function qt(r){return r.activePopup||Object.defineProperty(r,"activePopup",{value:oe(r),enumerable:!1}),r.activePopup}function er(r){let e=(y,w)=>$e(y,w),t=y=>_({createWithId:y||`jqx${ge()}`}),n=(...y)=>{for(let w of y)$e(w)},i=Wt(r),s=ie(r),m=Xt(s);return{editCssRule:e,createStyle:t,editCssRules:n,allowProhibit:i,handle:m,capturedHandling:m,log:(...y)=>F.on.log(...y).off,handlerWrapper:s}}function tr(r){let{factoryExtensions:e,instanceExtensions:t}=Ge(r);Te=e,be=t;let{editCssRule:n,createStyle:i,editCssRules:s,allowProhibit:m,handle:S,capturedHandling:y,log:w,handlerWrapper:x}=er(r),L=Kt(r);return{log:w,editCssRules:s,createStyle:i,editStylesheet:i,editCssRule:n,escHtml:M,logger:F,text:(g,c=!1)=>c?r.comment(g):document.createTextNode(g),node:(g,c=document)=>c.querySelector(g,c),nodes:(g,c=document)=>[...c.querySelectorAll(g,c)],get getNamedListener(){return L},get virtual(){return Vt(r)},get allowTag(){return m.allow},get prohibitTag(){return m.prohibit},get removeCssRule(){return Ye},get removeCssRules(){return Ye},get delegate(){return Yt(y)},get delegateCaptured(){return y},get handle(){return y},get at(){return T},get setStyle(){return n},get fn(){return Bt},get lenient(){return P.allowUnknownHtmlTags},get IS(){return u},get Popup(){return qt(r)},get listenerStore(){return x.ListenerStore}}}var qe=Ke(rr());function rr(){return function(e,t,n=T.BeforeEnd){if(e?.isJQx)return e;let i=u(t,HTMLBRElement);t=(!i&&t&&t.isJQx?t[0]:t)||document.body,n=n&&Object.values(T).find(g=>n===g)?n:void 0;let s=Y(e),m=!s&&ye(e),S=m||s,y={collection:ue(e)??[],isVirtual:i,isJQx:!0},w=X(y.collection),x=`JQx: input =&gt; ${m?`"${H(e.join(", "),70)}"`:!S&&w?`element collection [${H(y.collection.map(g=>`${u(g,Comment,Text)?"Comment|Text @":""} ${g?.outerHTML||g?.textContent}`).join(", "),70)}]`:`"${H(e,70)}"`}`;if(y.collection.length&&w)return F.log(x),i||y.collection.forEach(g=>{t.contains(g)||Q([g],t,n)}),K(y);if(S){if([e].flat().forEach(g=>y.collection.push(D(g))),y.collection.length>0){let g=y.collection.filter(c=>c?.dataset?.jqxcreationerror);y.collection=y.collection.filter(c=>!c?.dataset?.jqxcreationerror),F.log(`${x}`),F.log(`JQx: created ${y.isVirtual?"VIRTUAL ":""}[${H(me(y.collection).trim()||"sanitized: no elements remaining",70)}]`),y.isVirtual||Q(y.collection,t,n)}return K(y)}let L=Ce(e,t,y);return F.log(`JQx: input => ${L}`),K(y)}}var nn=qe;export{nn as default};
