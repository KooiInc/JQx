var{IS:u,maybe:A,$Wrap:pr,isNothing:it,xProxy:yr,addSymbolicExtensions:br}=st({useSymbolicExtensions:!1});function st(t={}){let{useSymbolicExtensions:e}=t,{shouldbeIsSingleObject:r,ISOneOf:n,isExcept:i,verifyNothingness:a,xProxy:f,determineType:S,addSymbolicExtensions:y,maybe:x,$Wrap:d}=at(b,e);return e&&y(),{IS:b,maybe:x,$Wrap:d,isNothing:a,xProxy:f,addSymbolicExtensions:y};function b(m,...h){let g=typeof m=="symbol"?Symbol.isSymbol:m;switch(!0){case!!x({trial:c=>"isTypes"in(h?.[0]??{})}):return r(m,h[0]);default:return h.length>1?n(g,...h):S(m,...h)}}}function at(t,e){let{SymbolAndCustomProxyFactory:r,maybeFactory:n,WrapAnyFactory:i,verifyNothingness:a,determineType:f}=lt(t,b),{xProxy:S,addSymbolicExtensions:y}=r(t,b,e),[x,d]=[n(),i(t,b)];return Object.freeze({shouldbeIsSingleObject:m,ISOneOf:h,isExcept:c,verifyNothingness:a,xProxy:S,determineType:f,addSymbolicExtensions:y,maybe:x,$Wrap:d});function b(o){return o?.[Symbol.proxy]??t(o)}function m(o,s){switch(!0){case"defaultValue"in s:return g(o,s);case"notTypes"in s:return c(o,s);default:return t(o,...[s.isTypes].flat())}}function h(o,...s){return s.some(l=>t(o,l))}function g(o,{defaultValue:s,isTypes:l=[void 0],notTypes:p}={}){return l=l?.constructor!==Array?[l]:l,p=p&&p?.constructor!==Array?[p]:[],p.length<1?t(o,...l)?o:s:c(o,{isTypes:l,notTypes:p})?o:s}function c(o,{isTypes:s=[void 0],notTypes:l=[void 0]}={}){return s=s?.constructor!==Array?[s]:s,l=l?.constructor!==Array?[l]:l,t(o,...s)&&!t(o,...l)}}function lt(){let t={IS:"toa.is",TYPE:"toa.type",IS_SYMBOL:"toa.isASymbol",PROXY:"toa.proxy"},e={NAN:"NaN",INFINITY:"Infinity",BOOLEAN:"Boolean",OBJECT:"Object",PROXY_PREFIX:"Proxy ("};return Object.freeze({SymbolAndCustomProxyFactory:n,maybeFactory:g,WrapAnyFactory:h,verifyNothingness:c,determineType:y});function r(o,s){Symbol.is||(Symbol.is=Symbol.for(t.IS),Symbol.type=Symbol.for(t.TYPE),Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return s(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...l){return o(this,...l)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(l){return s(l)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(l,...p){return o(l,...p)},enumerable:!1,configurable:!1}}))}function n(o,s,l){return Symbol.isSymbol||(Symbol.isSymbol=Symbol.for(t.IS_SYMBOL)),{xProxy:f(),addSymbolicExtensions:()=>r(o,s)}}function i(o){return(it(o,!0)?{name:"unknown"}:Object.getPrototypeOf(o)?.constructor).name}function a(o,s){return Proxy=new o(o,{construct(l,p){let v=new l(...p);return Object.defineProperty(v,s,{value:`${e.PROXY_PREFIX}${i(p[0])})`}),v}}),Proxy}function f(){Symbol.proxy||(Symbol.proxy=Symbol.for(t.PROXY));let o=Proxy;return{native(){Proxy=o},custom(){Proxy=a(o,Symbol.proxy)}}}function S(o,...s){let l=s.length<1,p=o==null;return{noInput:p,noShouldbe:l,compareTo:!l&&s[0],inputCTOR:!p&&(o?.constructor||Object.getPrototypeOf(o)?.constructor),isNaN:Number.isNaN(o)||A({trial:v=>String(o)===e.NAN}),isInfinity:A({trial:v=>String(o)})===e.INFINITY,shouldBeFirstElementIsNothing:!l&&c(s[0])}}function y(o,...s){let{noInput:l,noShouldbe:p,compareTo:v,inputCTOR:F,isNaN:me,isInfinity:ge,shouldBeFirstElementIsNothing:pe}=S(o,...s);switch(s=s.length&&s[0],!0){case pe:return String(o)===String(v);case(o?.[Symbol.proxy]&&p):return o[Symbol.proxy];case me:return p?e.NAN:String(v)===String(o);case ge:return p?e.INFINITY:String(v)===String(o);case l:return p?String(o):String(v)===String(o);case F===Boolean:return p?e.BOOLEAN:F===s;default:return d(o,s,p,x(o,F))}}function x(o,s){switch(!0){case o===0:return Number;case o==="":return String;case!o:return{name:String(o)};default:return s}}function d(o,s,l,p){switch(!0){case(!l&&s===o||o?.[Symbol.proxy]&&s===Proxy):return!0;case String(s)===e.NAN:return String(o)===e.NAN;case(o?.[Symbol.toStringTag]&&typeof s=="string"):return String(s)===o[Symbol.toStringTag];default:return s?m(o,s,p):b(o,p)}}function b(o,s){return(o?.[Symbol.toStringTag]??o?.prototype?.[Symbol.toStringTag])||s?.name||String(s)}function m(o,s,l){return A({trial:p=>o instanceof s})||s===l||s===Object.getPrototypeOf(l)||`${s?.name}`===l?.name}function h(o,s){return function(l){let p={get value(){return l},is(...v){return o(l,...v)},get type(){return s(l)}};return Object[Symbol.type]&&Object.defineProperties(p,{[Symbol.type]:{get(){return s(l)}},[Symbol.is]:{value(...v){return o(l,...v)}}}),Object.freeze(p)}}function g(){let o=s=>{};return function({trial:s,whenError:l=o}={}){try{return s()}catch(p){return l(p)}}}function c(o,s=!1){let l=o==null;return l=s?l||u(o,1/0)||u(o,NaN):l,l}}var He=ft(),R=ut(),J=ct();function ut(){return{html:Object.freeze("accept,action,align,alt,autocapitalize,autocomplete,autopictureinpicture,autoplay,background,bgcolor,border,capture,cellpadding,cellspacing,checked,cite,class,clear,contenteditable,color,cols,colspan,controls,controlslist,coords,crossorigin,datetime,decoding,default,dir,disabled,disablepictureinpicture,disableremoteplayback,download,draggable,enctype,enterkeyhint,face,for,headers,height,hidden,high,href,hreflang,id,inputmode,integrity,is,ismap,kind,label,lang,list,loading,loop,low,max,maxlength,media,method,min,minlength,multiple,muted,name,nonce,noshade,novalidate,nowrap,open,optimum,pattern,placeholder,playsinline,poster,preload,pubdate,radiogroup,readonly,rel,required,rev,reversed,role,rows,rowspan,spellcheck,scope,selected,shape,size,sizes,span,srclang,start,src,srcset,step,style,summary,tabindex,target,title,translate,type,usemap,valign,value,width,xmlns,slot".split(",")),svg:Object.freeze("accent-height,accumulate,additive,alignment-baseline,ascent,attributename,attributetype,azimuth,basefrequency,baseline-shift,begin,bias,by,class,clip,clippathunits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,cx,cy,d,dx,dy,diffuseconstant,direction,display,divisor,dur,edgemode,elevation,end,fill,fill-opacity,fill-rule,filter,filterunits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,fx,fy,g1,g2,glyph-name,glyphref,gradientunits,gradienttransform,height,href,id,image-rendering,in,in2,k,k1,k2,k3,k4,kerning,keypoints,keysplines,keytimes,lang,lengthadjust,letter-spacing,kernelmatrix,kernelunitlength,lighting-color,local,marker-end,marker-mid,marker-start,markerheight,markerunits,markerwidth,maskcontentunits,maskunits,max,mask,media,method,mode,min,name,numoctaves,offset,operator,opacity,order,orient,orientation,origin,overflow,paint-order,path,pathlength,patterncontentunits,patterntransform,patternunits,points,preservealpha,preserveaspectratio,primitiveunits,r,rx,ry,radius,refx,refy,repeatcount,repeatdur,restart,result,rotate,scale,seed,shape-rendering,specularconstant,specularexponent,spreadmethod,startoffset,stddeviation,stitchtiles,stop-color,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke,stroke-width,style,surfacescale,systemlanguage,tabindex,targetx,targety,transform,text-anchor,text-decoration,text-rendering,textlength,type,u1,u2,unicode,values,viewbox,visibility,version,vert-adv-y,vert-origin-x,vert-origin-y,width,word-spacing,wrap,writing-mode,xchannelselector,ychannelselector,x,x1,x2,xmlns,y,y1,y2,z,zoomandpan".split(","))}}function ct(){return{a:!0,area:!0,audio:!1,br:!0,base:!0,body:!0,button:!0,canvas:!0,comment:!0,dl:!0,data:!0,datalist:!0,div:!0,em:!0,embed:!1,fieldset:!0,font:!0,footer:!0,form:!1,hr:!0,head:!0,header:!0,output:!0,iframe:!1,frameset:!1,img:!0,input:!0,li:!0,label:!0,legend:!0,link:!0,map:!0,mark:!0,menu:!0,media:!0,meta:!0,nav:!0,meter:!0,ol:!0,object:!1,optgroup:!0,option:!0,p:!0,param:!0,picture:!0,pre:!0,progress:!1,quote:!0,script:!1,select:!0,source:!0,span:!0,style:!0,caption:!0,td:!0,col:!0,table:!0,tr:!0,template:!1,textarea:!0,time:!0,title:!0,track:!0,details:!0,ul:!0,video:!0,del:!0,ins:!0,slot:!0,blockquote:!0,svg:!0,dialog:!0,summary:!0,main:!0,address:!0,colgroup:!0,tbody:!0,tfoot:!0,thead:!0,th:!0,dd:!0,dt:!0,figcaption:!0,figure:!0,i:!0,b:!0,code:!0,h1:!0,h2:!0,h3:!0,h4:!0,abbr:!0,bdo:!0,dfn:!0,kbd:!0,q:!0,rb:!0,rp:!0,rt:!0,ruby:!0,s:!0,strike:!0,samp:!0,small:!0,strong:!0,sup:!0,sub:!0,u:!0,var:!0,wbr:!0,nobr:!0,tt:!0,noscript:!0}}function ft(){return["::backdrop{background-color:grey;opacity:0.2;}",`#jqxPopup{overflow:hidden;background-color:transparent;outline:none;border:none;inset:0;animation:fade-out 0.5s ease-out;&[open]{display:flex;align-items:center;justify-content:center;animation:fade-in 0.5s ease;}#jqxPopupContent{background-color:white;border:solid 1px #eee;box-shadow:1px 2px 8px #999;border-radius:4px;padding:12px;vertical-align:middle;max-height:40vh;max-width:50vw;overflow:auto;margin:0 auto;div:not(#closeHandleIcon){clear:both;}@media (width <= 640px){max-width:80vw;max-height:60vh;}#closeHandleIcon{cursor:pointer;width:24px;height:24px;display:inline;position:absolute;top:4px;right:4px;justify-content:right;background-image:url("data:image/svg+xml;utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22iso-8859-1%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20id%3D%22Layer_1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20128%20128%22%20style%3D%22enable-background%3Anew%200%200%20128%20128%3B%22%20xml%3Aspace%3D%22preserve%22%3E%3Crect%20x%3D%22-368%22%20y%3D%226%22%20style%3D%22display%3Anone%3Bfill%3A%23E0E0E0%3B%22%20width%3D%22866%22%20height%3D%221018%22%2F%3E%3Ccircle%20style%3D%22fill%3A%23FFFFFF%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Ccircle%20style%3D%22fill%3A%238CCFB9%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2239%22%2F%3E%3Ccircle%20style%3D%22fill%3Anone%3Bstroke%3A%23444B54%3Bstroke-width%3A6%3Bstroke-miterlimit%3A10%3B%22%20cx%3D%2264%22%20cy%3D%2264%22%20r%3D%2248%22%2F%3E%3Cpolyline%20style%3D%22fill%3Anone%3Bstroke%3A%23FFFFFF%3Bstroke-width%3A6%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%3B%22%20points%3D%2242%2C69%2055.55%2C81%20%20%2086%2C46%20%22%2F%3E%3C%2Fsvg%3E");@media (width <= 640px){background-image:none;position:relative;margin:-15px -15px 4px 0;float:right;vertical-align:middle;border:1px solid #AAA;padding:2px;border-radius:50%;width:12px;height:12px;font-size:12px;line-height:12px;font-weight:bold;text-align:center;&:after{content:'\\2714';color:green;}}}.warn{display:none;text-align:center;color:red;border-top:1px solid #999;margin-top:1em;padding-top:3px;animation:warn-fade-out 0.2s ease-out;}.warn.active{opacity:1;display:block;animation:warn-fade-in 0.2s ease-in;}}}`,"@keyframes fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1, 1);display:flex;}}","@keyframes fade-out{0%{opacity:1;transform:scale(1, 1);display:flex;}100%{opacity:0;transform:scale(0, 0);display:none;}}","@keyframes warn-fade-in{0%{opacity:0;transform:scale(0, 0);display:none;}100%{opacity:1;transform:scale(1,1 );display:block;}}","@keyframes warn-fade-out{0%{opacity:1;transform:scale(1, 1);display:block;}100%{opacity:0;transform:scale(0, 0);display:none;}}"]}var Me={html:"innerHTML",text:"textContent",class:"className"},U=dt();function dt(){let t={get(e,r){let n=String(r)?.toLowerCase();switch(!0){case n in e:return e[n];case vt(n):return Ie(e,n,r);default:return Ie(e,n,r,!0)}},enumerable:!1,configurable:!1};return new Proxy({},t)}function Ie(t,e,r,n=!1){return Object.defineProperty(t,e,{get(){return n?i=>St(r):Et(e)}}),t[e]}function mt(t,e,r){return e=e?.isJQx&&e.first()||e,A({trial:n=>xt(e)?t.append(e):Re(e)?t.insertAdjacentHTML("beforeend",e):t.append(e),whenError:n=>console.info(`${r} (for root ${t}) not created, reason
`,n)})}function gt(t,e,...r){let n=pt(e,t);return r?.forEach(i=>mt(n,i,t)),n}function pt(t,e){switch(t=ye(e)?ht(t):t?.isJQx?t.first():t,!0){case u(t,String):return k(e,Re(t,e)?{html:t}:{text:t});case u(t,Node):return bt(e,t);default:return k(e,t)}}function yt(t){return delete t.data,Object.keys(t).length<1||Object.keys(t).forEach(e=>{let r=e.toLowerCase();r in Me&&(t[Me[r]]=t[e],delete t[e])}),t}function bt(t,e){let r=k(t);return r.append(e),r}function k(t,e={}){e=De(e,{});let r=Object.entries(e.data??{}),n=Object.assign(ye(t)?new Comment(e?.text):document.createElement(t),yt(e));return r.length&&r.forEach(([i,a])=>n.dataset[i]=String(a)),n}function De(t,e){return e?u(t,{isTypes:Object,notTypes:[Array,null,NaN,Proxy],defaultValue:e}):u(t,{isTypes:Object,notTypes:[Array,null,NaN,Proxy]})}function ht(t){return De(t)?t?.text??t?.textContent??"":String(t)}function St(t){return k("b",{style:"color:red",text:`'${t}' is not a valid HTML-tag`})}function Re(t,e){return!ye(e)&&u(t,String)&&/<.*>|&[#|0-9a-z]+[^;];/i.test(t)}function xt(t){return t?.constructor===Comment||t?.constructor===CharacterData}function ye(t){return t?.constructor===Comment||/comment/i.test(t)}function vt(t){return!u(k(t),HTMLUnknownElement)}function Et(t){return(e,...r)=>gt(t,e,...r)}var{IS:j,maybe:be,$Wrap:Er,isNothing:wt,xProxy:wr,addSymbolicExtensions:Tr}=Tt({useSymbolicExtensions:!1});function Tt(t={}){let{useSymbolicExtensions:e}=t,{shouldbeIsSingleObject:r,ISOneOf:n,isExcept:i,verifyNothingness:a,xProxy:f,determineType:S,addSymbolicExtensions:y,maybe:x,$Wrap:d}=Lt(b,e);return e&&y(),{IS:b,maybe:x,$Wrap:d,isNothing:a,xProxy:f,addSymbolicExtensions:y};function b(m,...h){let g=typeof m=="symbol"?Symbol.isSymbol:m;switch(!0){case!!x({trial:c=>"isTypes"in(h?.[0]??{})}):return r(m,h[0]);default:return h.length>1?n(g,...h):S(m,...h)}}}function Lt(t,e){let{SymbolAndCustomProxyFactory:r,maybeFactory:n,WrapAnyFactory:i,verifyNothingness:a,determineType:f}=Ct(t,b),{xProxy:S,addSymbolicExtensions:y}=r(t,b,e),[x,d]=[n(),i(t,b)];return Object.freeze({shouldbeIsSingleObject:m,ISOneOf:h,isExcept:c,verifyNothingness:a,xProxy:S,determineType:f,addSymbolicExtensions:y,maybe:x,$Wrap:d});function b(o){return o?.[Symbol.proxy]??t(o)}function m(o,s){switch(!0){case"defaultValue"in s:return g(o,s);case"notTypes"in s:return c(o,s);default:return t(o,...[s.isTypes].flat())}}function h(o,...s){return s.some(l=>t(o,l))}function g(o,{defaultValue:s,isTypes:l=[void 0],notTypes:p}={}){return l=l?.constructor!==Array?[l]:l,p=p&&p?.constructor!==Array?[p]:[],p.length<1?t(o,...l)?o:s:c(o,{isTypes:l,notTypes:p})?o:s}function c(o,{isTypes:s=[void 0],notTypes:l=[void 0]}={}){return s=s?.constructor!==Array?[s]:s,l=l?.constructor!==Array?[l]:l,t(o,...s)&&!t(o,...l)}}function Ct(){let t={IS:"toa.is",TYPE:"toa.type",IS_SYMBOL:"toa.isASymbol",PROXY:"toa.proxy"},e={NAN:"NaN",INFINITY:"Infinity",BOOLEAN:"Boolean",OBJECT:"Object",PROXY_PREFIX:"Proxy ("};return Object.freeze({SymbolAndCustomProxyFactory:n,maybeFactory:g,WrapAnyFactory:h,verifyNothingness:c,determineType:y});function r(o,s){Symbol.is||(Symbol.is=Symbol.for(t.IS),Symbol.type=Symbol.for(t.TYPE),Object.defineProperties(Object.prototype,{[Symbol.type]:{get(){return s(this)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(...l){return o(this,...l)},enumerable:!1,configurable:!1}}),Object.defineProperties(Object,{[Symbol.type]:{value(l){return s(l)},enumerable:!1,configurable:!1},[Symbol.is]:{value:function(l,...p){return o(l,...p)},enumerable:!1,configurable:!1}}))}function n(o,s,l){return Symbol.isSymbol||(Symbol.isSymbol=Symbol.for(t.IS_SYMBOL)),{xProxy:f(),addSymbolicExtensions:()=>r(o,s)}}function i(o){return(wt(o,!0)?{name:"unknown"}:Object.getPrototypeOf(o)?.constructor).name}function a(o,s){return Proxy=new o(o,{construct(l,p){let v=new l(...p);return Object.defineProperty(v,s,{value:`${e.PROXY_PREFIX}${i(p[0])})`}),v}}),Proxy}function f(){Symbol.proxy||(Symbol.proxy=Symbol.for(t.PROXY));let o=Proxy;return{native(){Proxy=o},custom(){Proxy=a(o,Symbol.proxy)}}}function S(o,...s){let l=s.length<1,p=o==null;return{noInput:p,noShouldbe:l,compareTo:!l&&s[0],inputCTOR:!p&&(o?.constructor||Object.getPrototypeOf(o)?.constructor),isNaN:Number.isNaN(o)||be({trial:v=>String(o)===e.NAN}),isInfinity:be({trial:v=>String(o)})===e.INFINITY,shouldBeFirstElementIsNothing:!l&&c(s[0])}}function y(o,...s){let{noInput:l,noShouldbe:p,compareTo:v,inputCTOR:F,isNaN:me,isInfinity:ge,shouldBeFirstElementIsNothing:pe}=S(o,...s);switch(s=s.length&&s[0],!0){case pe:return String(o)===String(v);case(o?.[Symbol.proxy]&&p):return o[Symbol.proxy];case me:return p?e.NAN:String(v)===String(o);case ge:return p?e.INFINITY:String(v)===String(o);case l:return p?String(o):String(v)===String(o);case F===Boolean:return p?e.BOOLEAN:F===s;default:return d(o,s,p,x(o,F))}}function x(o,s){switch(!0){case o===0:return Number;case o==="":return String;case!o:return{name:String(o)};default:return s}}function d(o,s,l,p){switch(!0){case(!l&&s===o||o?.[Symbol.proxy]&&s===Proxy):return!0;case String(s)===e.NAN:return String(o)===e.NAN;case(o?.[Symbol.toStringTag]&&typeof s=="string"):return String(s)===o[Symbol.toStringTag];default:return s?m(o,s,p):b(o,p)}}function b(o,s){return(o?.[Symbol.toStringTag]??o?.prototype?.[Symbol.toStringTag])||s?.name||String(s)}function m(o,s,l){return be({trial:p=>o instanceof s})||s===l||s===Object.getPrototypeOf(l)||`${s?.name}`===l?.name}function h(o,s){return function(l){let p={get value(){return l},is(...v){return o(l,...v)},get type(){return s(l)}};return Object[Symbol.type]&&Object.defineProperties(p,{[Symbol.type]:{get(){return s(l)}},[Symbol.is]:{value(...v){return o(l,...v)}}}),Object.freeze(p)}}function g(){let o=s=>{};return function({trial:s,whenError:l=o}={}){try{return s()}catch(p){return l(p)}}}function c(o,s=!1){let l=o==null;return l=s?l||j(o,1/0)||j(o,NaN):l,l}}var Q=Nt;function Nt({styleSheet:t,createWithId:e}={}){let{tryParseAtOrNestedRules:r,ruleExists:n,checkParams:i,sheet:a,removeRules:f,consider:S,currentSheetID:y}=Ft({styleSheet:t,createWithId:e});function x(g,c){if(g&&c.removeProperties){Object.keys(c.removeProperties).forEach(o=>g.style.removeProperty(je(o)));return}Object.entries(c).forEach(([o,s])=>{o=je(o.trim()),s=s.trim();let l;if(/!important/.test(s)&&(s=s.slice(0,s.indexOf("!important")).trim(),l="important"),!CSS.supports(o,s))return console.error(`StylingFactory ${y} error: '${o}' with value '${s}' not supported (yet)`);Je(()=>g.style.setProperty(o,s,l),`StylingFactory ${y} (setRule4Selector) failed`)})}function d(g,c,o=a){if(g=g?.trim?.(),!j(g,String)||!g.length||/[;,]$/g.test(g))return console.error(`StylingFactory ${y} (setRules): [${g||"[no selector given]"}] is not a valid selector`);if(c.removeRule)return f(g);let s=n(g,!0),l=s||o.cssRules[o.insertRule(`${g} {}`,o.cssRules.length||0)];return S(()=>x(l,c),g,s)}function b(g){let c=g.trim().split(/{/,2),o=c.shift().trim();if(!j(o,String)||!o?.trim()?.length)return console.error(`StylingFactory ${y} (doParse): no (valid) selector could be extracted from rule ${he(g)}`);let s=It(c.shift());return Je(()=>d(o,s),`StylingFactory ${y} (setRules) failed`)}function m(g){let c=r(g);return c.done?c.existing:b(g)}function h(g,c){return g.trim().startsWith("@media")?m(At(g,c)):d(g,c)}return function(g,c={}){return i(g,c)&&(Object.keys(c).length?h(g,c):m(g))}}function Ft({styleSheet:t,createWithId:e}){let r="Note: The rule or some of its properties may not be supported by your browser (yet)",n=`for style#${e}`;t=e?i(e):t;function i(m){let h=document.querySelector(`#${m}`)?.sheet;if(h)return h;let g=Object.assign(document.createElement("style"),{id:m});return document.head.insertAdjacentElement("beforeend",g),g.sheet}function a(m){return console.error(`StylingFactory ${n} [rule: ${m}]
    => @charset, @namespace and @import are not supported here`),{done:!0}}function f(m,h){return[...t.rules].find(g=>h?ke(g.selectorText||"",m):Ot`${Pt(m)}${[..."gim"]}`.test(g.cssText))}function S(m){return/^@charset|@import|namespace/i.test(m.trim())?a(m):m.match(/}/g)?.length>1?{existing:d(m,1),done:!0}:{done:!1}}function y(m){let h=[...t.cssRules].reduce((c,o,s)=>ke(o.selectorText||"",m)&&c.concat(s)||c,[]),g=h.length;return h.forEach(c=>t.deleteRule(c)),g>0?console.info(`\u2714 Removed ${g} instance${g>1?"s":""} of selector ${m} from ${n.slice(4)}`):console.info(`\u2714 Remove rule: selector ${m} does not exist in ${n.slice(4)}`)}function x(m,h){return m&&j(m,String)&&m.trim().length>0&&j(h,Object)||(console.error(`StylingFactory ${n} called with invalid parameters`),!1)}function d(m){m=m.trim();let h=m.slice(0,m.indexOf("{")).trim(),g=!!f(h);try{return t.insertRule(`${m}`,t.cssRules.length),g}catch(c){return console.error(`StylingFactory ${n} (tryParse) ${c.name} Error:
${c.message}
Rule: ${he(m)}
${r}`),g}}function b(m,h,g){try{return m(),g}catch(c){return console.error(`StylingFactory ${n} (tryAddOrModify) ${c.name} Error:
${c.message}
Rule: ${he(h)}
${r}`),g}}return{sheet:t,removeRules:y,tryParseAtOrNestedRules:S,ruleExists:f,checkParams:x,tryParse:d,consider:b,currentSheetID:n}}function At(t,e){return`${t.trim()} ${Object.entries(e).map(([r,n])=>`${r}: { ${$t(n)}`)}`}function he(t){let e=(t||"NO RULE").trim().slice(0,50).replace(/\n/g,"\\n").replace(/\s{2,}/g," ");return t.length>e.length?`${e.trim()}...truncated`:e}function $t(t){return Object.entries(t).map(([e,r])=>`${e}: ${r.trim()}`).join(`;
`)}function Pt(t){return t.replace(/([*\[\]()-+{}.$?\\])/g,e=>`\\${e}`)}function Ot(t,...e){let r=e.length&&Array.isArray(e.slice(-1))?e.pop().join(""):"";return new RegExp((e.length&&t.raw.reduce((n,i,a)=>n.concat(e[a-1]||"").concat(i),"")||t.raw.join("")).split(`
`).map(n=>n.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),r)}function je(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/[^--]^-|-$/,"")}function Je(t,e){try{return t()}catch(r){console.error(`${e||"an error occured"}: ${r.message}`)}}function Ht(t){return t.replace(/\/\*.+?\*\//gm,"").replace(/[}{\r\n]/g,"").replace(/(data:.+?);/g,(e,r)=>`${r}\\3b`).split(";").map(e=>e.trim()).join(`;
`).replaceAll("\\3b",";").split(`
`)}function Mt(t){return t.reduce((e,r)=>{let[n,i]=[r.slice(0,r.indexOf(":")).trim(),r.slice(r.indexOf(":")+1).trim().replace(/;$|;.+(?=\/*).+\/$/,"")];return n&&i?{...e,[n]:i}:e},{})}function It(t){return Mt(Ht(t))}function ke(t,e){return t?.replace("::",":")===e?.replace("::",":")}var Se=!1,Dt={on:()=>Se=!0,off:()=>Se=!1},P={tagsRaw:J,allowUnknownHtmlTags:Dt,isAllowed(t){if(Se)return!0;let e=u(t,String)?t.toLowerCase():t?.nodeName.toLowerCase()||"none";return e==="#text"||!!J[e]},allowTag:t=>J[t.toLowerCase()]=!0,prohibitTag:t=>J[t.toLowerCase()]=!1};var Rt=!0,X={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/^javascript|injected|noreferrer|alert|DataURL/gi};function jt(t){if(Rt&&Object.keys(t.removed).length){let e=Object.entries(t.removed).reduce((r,[n,i])=>[...r,`${H(n)} => ${i}`],[]).join("\\000A");w.error(`JQx: HTML creation error(s): ${e}`)}}function Jt(t){let e=t.nodeName.toLowerCase(),r=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return/-/.test(e)&&!r.find(n=>n===e)||P.isAllowed(e)}function I(t){let e={rawHTML:t?.parentElement?.getHTML()??"no html",removed:{}};return u(t,HTMLElement)&&[...t.childNodes].forEach(r=>{if(r?.children?.length&&I(r),r?.attributes){let i=u(r,SVGElement)?R.svg:R.html;[...(r??{attributes:[]}).attributes].forEach(a=>{let f=a.name.trim().toLowerCase(),S=a.value.trim().toLowerCase().replace(X.whiteSpace,""),y=f==="href"?!X.validURL.test(S):X.notAllowedValues.test(S),x=f.startsWith("data")?!X.data.test(f):!!i[f];if(y||x){let d=G(a.value||"none",60);d+=d.length===60?"...":"",e.removed[`${a.name}`]=`attribute/property/value not allowed, removed. Value: ${d}`,r.removeAttribute(a.name)}})}if(!(Jt(r)||r.constructor===CharacterData||r.constructor===Comment)){let i=(r?.outerHTML||r?.textContent).trim(),a=G(i,60)??"EMPTY";a+=a.length===60?"...":"",e.removed[`<${r.nodeName?.toLowerCase()}>`]=`not allowed, not rendered. Value: ${a}`,r.remove()}}),jt(e),t}function kt(t){let e=document.createElement("div");return e.insertAdjacentHTML(L.end,t),e.childNodes.length?I(e):void 0}function Qt(t,e,r){switch(!0){case u(t,Comment):return e.insertAdjacentHTML(r,`<!--${t.data}-->`);case u(t,Text):return e.insertAdjacentText(r,t.data||t.textContent);default:return}}function D(t=[],e=document.body,r=L.BeforeEnd){return r=r||L.BeforeEnd,e=e?.isJQx?e.node:e||document.body,t.reduce((n,i)=>{let a=O(i)&&Bt(i,e,r);return a?[...n,a]:n},[])}function Bt(t,e=document.body,r=L.BeforeEnd){return r=r||L.BeforeEnd,e=e?.isJQx?e?.[0]:e,u(t,Comment,Text)?Qt(t,e,r):u(t,HTMLElement)?e.insertAdjacentElement(r,t):void 0}function C(t){if(u(t,Text,Comment))return t;let e=t?.trim(),r=e?.split(/<text>|<\/text>/i)??[];if(r?.length&&(r=r.length>1?r.filter(i=>i.length).shift():void 0),e.startsWith("<!--")&&e.endsWith("-->"))return document.createComment(t.replace(/<!--|-->$/g,""));if(r||u(e,String)&&!/^<(.+)[^>]+>/m.test(e))return document.createTextNode(r??e);let n=kt(t);return n.childNodes.length<1?C(`<span data-jqxcreationerror="1">${Z(t,60)}</span>`):n.children[0]}function K(t){if(t.node("#jqxPopup"))return;t.logger.log("JQx: [JQx].Popup first call. Dialog element created."),t.dialog({id:"jqxPopup"},t.div({id:"jqxPopupContent"})).render,t.editCssRules(...He);let e=[],[r,n]=[t("#jqxPopupContent"),t.node("#jqxPopup")],i={};return t.handle({type:"click, cancel",handlers:m,name:"genericPopupCloseHandler",capture:!0,about:"A generic handler for JQx popups"}),Object.freeze({show:a,remove:f,removeModal:b});function a(c){if(n.open)switch(!0){case S(c):return;default:return f(),setTimeout(()=>a(c),200)}i={...c};let{content:o}=i;return t.IS(o,String,HTMLElement)||o?.isJQx?y():!0}function f(){return i.modal?g(i.warnMessage):x()}function S(c){for(let[o,s]of Object.entries(i))if(s!==c[o])return!1;return!0}function y(){r.clear();let{content:c,modal:o,closeAfter:s}=i;o=t.IS(o,Boolean)?o:!1;let l=o?"":t.div({id:"closeHandleIcon"});r.append(l,t.IS(c,String)?t.div(c):c),n.showModal(),!o&&t.IS(s,Number)&&h(f,s)}function x(){if(n.close(i.returnValue),d(),t.IS(i.callback,Function))return e.push(setTimeout(()=>i.callback(i.returnValue),200));i={}}function d(){e.forEach(c=>clearTimeout(c)),e=[]}function b({callback:c,value:o}={}){i.returnValue=o,i.modal=!1,i.callback=c||i.callback,f()}function m({evt:c}){if(!(Object.keys(i).length<1||!n.open)&&(c.type==="cancel"&&i.modal&&c.preventDefault(),c.target.closest("#closeHandleIcon")||!c.target.closest("#jqxPopupContent")))return i.activeTimer&&clearTimeout(i.activeTimer),f()}function h(c,o){t.IS(c,Function)&&t.IS(o,Number)&&o>0&&(d(),e.push(setTimeout(c,o*1e3)))}function g(c){if(!t.IS(c,String,HTMLElement,Proxy))return;let o=r.find$(".warn");switch(!0){case o.is.empty:o=t.div({class:"warn"},c);default:r.append(o.addClass("active")),h(()=>r.find$(".warn").removeClass("active"),2)}}}function q(t){let e={},r="anonymous_";function n(d){if(d){let{handler:b,capture:m,type:h}=d;document.addEventListener(h,b,{capture:m})}}function i(d){if(d){let{type:b,handler:m,capture:h}=d;document.removeEventListener(b,m,{capture:h})}}function a(d,b,m,h){return function(g){if(!T(b))return d({evt:g});let c=g.target.closest(b);if(c){let o=t(c);d({self:o,me:o,evt:g}),m&&y(g.type,h)}return!0}}function f(d){return e[d]=e[d]||{},e[d]}function S(d,b){return Object.entries(f(d)).find(([m])=>m===b)}function y(d,b){let m=S(d,b);m&&(i(m[1]),delete e[d][b],delete ee[b],w.warn(`Removed listener [${b}] for event type [${d}].`))}function x(d){let{type:b,handler:m,name:h,capture:g,once:c,selector:o,node:s,about:l}=d;e[b]=e[b]||{};let p=xe(h||m.name),v=m;if(s instanceof HTMLElement){let F=s.dataset.hid||p;s.dataset.hid=F,o=`[data-hid=${F}]`}switch(!0){case!e[b][p]:return w.log(`JQx: created listener for event type ${b}, with handler name ${p}`),e[b][p]={name:p,handler:a(m,o,c,p),capture:Qe(b,g),once:!!c,type:b,initialHandler:v,selector:!!o&&o||!1,about:!!l&&l||!1,unListen(){y(b,p)}},e[b][p];default:return console.warn(`The listener [${p}] for [${b}] exists, it is not re-assigned.`)}}return{remove(...d){return y(...d)},listen:function(d){let{type:b,handler:m}=d;if(!T(b)||!u(m,Function))return;let h=x(d);if(h)return n(h),{type:b,name:h.name,unListen(){y(b,h.name)}}},get ListenerStore(){return Object.freeze({...e})}}}var w=Yt(),Wt=["load","unload","scroll","focus","blur","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","loadstart","progress","error","abort","load","loadend","pointerenter","pointerleave","readystatechange"],L=Object.freeze(new Proxy({start:"afterbegin",afterbegin:"afterbegin",end:"beforeend",beforeend:"beforeend",before:"beforebegin",beforebegin:"beforebegin",after:"afterend",afterend:"afterend"},{get(t,e){return t[String(e).toLowerCase()]??t[e]}})),zt=[...Array(26)].map((t,e)=>String.fromCharCode(e+65)).concat([...Array(26)].map((t,e)=>String.fromCharCode(e+97))).concat([...Array(10)].map((t,e)=>`${e}`)),Ee=Object.freeze({get(t,e){return t[z(e)]||t[e]},enumerable:!1,configurable:!1}),ee={};function we(){let t=setTimeout(()=>{});for(;t>=0;)clearTimeout(t--)}function xe(t){return T(t)&&!/^handler|handlers$/gi.test(t.trim())?t.trim():Be()}function Te(t){let e=!!t.node&&!u(t,Text,Comment);switch(!0){case e:let r=t.node.dataset?Object.keys(t.node.dataset).map(a=>`[data-${a}]`):[],i=[t.attr("id")&&`#${t?.attr("id")}`||void 0,t.attr("class")&&t?.attr("class").split(" ").map(a=>`.${a}`).join(", ")||void 0,r.length>0&&r.join(", ")||void 0].filter(a=>!!a).join(", ")||[];return i.length?`(${i})`:"";default:return""}}function Be(t){let e=`anonymous_${Math.random().toString(36).slice(2)}`;return ee[e]?Be():(ee[e]=e,e)}function Qe(t,e){return!!Wt.find(r=>r===t)||!!e}function ne(t){return t.startsWith("data")||R.html.find(e=>t.toLowerCase()===e)}function oe(t){return t&&(t.textContent="")}function B(t,e=0,r=!0){return t=t?.parentElement,e+=t?t[r?"scrollTop":"scrollLeft"]:0,t?B(t,e,r):e}function T(t,e=1){return e=u(e,Number)&&e||1,u(t,String)&&t.length>=e}function G(t,e=120){return Z(t,e).replace(/&lt;/g,"<")}function Z(t,e=120){return`${t}`.trim().slice(0,e).replace(/>\s+</g,"><").replace(/</g,"&lt;").replace(/\s{2,}/g," ").replace(/\n/g,"\\n")+(t.length>e?" &hellip;":"").trim()}function H(t){switch(!0){case u(t,String):let e=document.createElement("div");return e.append(t),e.innerHTML;default:return t}}function ve(t){return u(t,String)&&Object.assign(document.createElement("textarea"),{innerHTML:t}).textContent||t}function Yt(){let[t,e]=[!1,!0],r=[],n={get on(){return t=!0,n},get off(){return t=!1,n},get disable(){return e=!0,n},get enable(){return e=!1,n},get backLog(){return r}};function i(){e=!0}function a(){e=!1}function f(...x){return r.unshift(...x.map(d=>`${re()} \u2A3B ${ve(d)}`)),console.error(r.slice(0,x.length).join(`
`)),n}function S(...x){return r.unshift(...x.map(d=>`${re()} \u26A0 ${ve(d)}`)),console.warn(r.slice(0,x.length).join(`
`)),n}function y(...x){let d=x.map(b=>`${re()} \u2714 ${ve(b)}`);switch(!e&&r.unshift(...d),t){case!0:console.log(d.join(`
`));default:return n}}return Object.defineProperties(n,{log:{value:y,enumerable:!1},error:{value:f,enumerable:!1},warn:{value:S,enumerable:!1}}),Object.freeze(n)}function re(){return(t=>`[${te(t.getHours())}:${te(t.getMinutes())}:${te(t.getSeconds())}.${te(t.getMilliseconds(),3)}]`)(new Date)}function Le(t,e){if(t)for(let[r,n]of Object.entries(e)){if(r=N(r),r.startsWith("data"))return ie(t,n);u(n,String)&&ne(r)&&t.setAttribute(r,n.split(/[, ]/)?.join(" "))}}function ie(t,e){if(t&&u(e,Object))for(let[r,n]of Object.entries(e))t.setAttribute(`data-${N(r)}`,n)}function se(t){return t?u(t,Proxy)?[t.EL]:u(t,NodeList)?[...t]:O(t)?[t]:_(t)?t:t.isJQx?t.collection:void 0:[]}function ae(t,e){return t.andThen(e)}function le(t,e){return t.andThen(e,!0)}function O(t){return u(t,Text,HTMLElement,Comment)}function W(t,e){if(u(e,Object))for(let[r,n]of Object.entries(e)){let i;/!important/i.test(n)&&(n=n.slice(0,n.indexOf("!")).trim(),i="important"),t.style.setProperty(N(r),n,i)}}function M(t){let e=t.cloneNode(!0);return e.removeAttribute&&e.removeAttribute("id"),t.isConnected?t.remove():t=null,e}function We(t){if(!u(t,HTMLElement))return;let e=t.style,r=getComputedStyle(t),n=!![e.visibility,r.visibility].includes("hidden"),i=!![e.display,r.display].includes("none"),a=!!t.hidden,f=parseInt(r.height)<1||parseInt(r.width)<1,S=t.offsetTop<0||t.offsetLeft+t.offsetWidth<0||t.offsetLeft>document.body.offsetWidth,y=+r.opacity==0||+(e.opacity||1)==0;return!(a||S||y||i||n||f)}function ze(t){return t?.isConnected?!![...document.querySelectorAll(":is(:read-write)")].find(e=>e===t):!1}function Ye(t){return t?.filter(e=>e).reduce((e,r)=>e.concat(Fe(r)?`<!--${r.data}-->`:ce(r)?r.textContent:r.outerHTML),"")}function te(t,e=2){return`${t}`.padStart(e,"0")}function _e(t,e=0){return[t,e]=[Math.floor(t),Math.ceil(e)],Math.floor([...crypto.getRandomValues(new Uint32Array(1))].shift()/2**32*(t-e+1)+e)}function ue(){return`_${_t(zt).slice(0,8).join("")}`}function Ce(t){return t=u(t,String)&&/,/.test(t)?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):t,u(t,Array)?t:u(t,String)&&t?.trim().toLowerCase()||""}function Ve(t){return t?.isConnected?!![...document.querySelectorAll(":is(:modal)")].find(e=>e===t):!1}function Ne(t,e){switch(t=String(t).trim(),!0){case/^(0|false|f)$/i.test(t):return!1;case/^(1|true|t)$/i.test(t):return!0;default:return e}}function _t(t){let e=t.length;for(;e--;){let r=_e(e);[t[e],t[r]]=[t[r],t[e]]}return t}function z(t){return u(t,String)?t.toLowerCase().split("-").map((e,r)=>r&&`${Vt(e)}`||e).join(""):t}function N(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/^-|-$/,"")}function Vt([t,...e]){return`${t.toUpperCase()}${e.join("")}`}function ce(t){return u(t,Comment,Text)}function Fe(t){u(t,Comment)}function Ue(t){return u(t,Text)}function Y(t){return u(t,String)&&/^<|>$/.test(`${t}`.trim())}function _(t){return u(t,Array)&&!t?.find(e=>!O(e))}function fe(t){return u(t,Array)&&!t?.find(e=>!Y(e))}function E(t,e){let r=t.collection.filter(n=>!ce(n));for(let n=0;n<r.length;n+=1)e(r[n],n);return t}function Xe(t){return t.node?u(t.node,Comment)?`<!--${t.node.textContent}-->`:t.HTML.get(1).split(">")[0]+">...":""}function Ae(t,e,r){let n=e!==document.body&&u(t,String)&&t.toLowerCase()!=="body"?e:document;try{r.collection=[...n.querySelectorAll(t)]}catch{w.warn(`JQx: Invalid CSS querySelector. [${u(t,String)?t:"Not a string!"}]`)}}function Ge(){return{isCommentOrTextNode:ce,isNode:O,isComment:Fe,isText:Ue,isHtmlString:Y,isArrayOfHtmlElements:_,isArrayOfHtmlStrings:fe,ElemArray2HtmlString:Ye,input2Collection:se,setCollectionFromCssSelector:Ae,cssRuleEdit:Q({createWithId:"JQxStylesheet"})}}function Ze(){let e=Object.freeze({notInDOM:"n/a",writable:"n/a",modal:"n/a",empty:!0,open:"n/a",visible:"n/a"});return r=>{let n=r.node;return u(n,Node)?Object.freeze({get writable(){return ze(n)},get modal(){return Ve(n)},get inDOM(){return n.isConnected},get open(){return n.open??!1},get visible(){return We(n)},get disabled(){return n.hasAttribute("readonly")||n.hasAttribute("disabled")},get empty(){return r.collection.length<1},get virtual(){return r.isVirtual}}):e}}function Ke(t,e,r,n){r&&u(e,String)&&(e={[e]:r==="-"?"":r});let i;e.className&&(i=e.className,delete e.className),i=[...t.classList].find(f=>f.startsWith("JQxClass-")||i&&f===i)||i||`JQxClass-${ue().slice(1)}`,n.editCssRule(`.${i}`,e),t.classList.add(i)}var Ut=Ze();function qe(t){return{factoryExtensions:Xt(t),instanceExtensions:Gt(t)}}function Xt(t){return{data(e){return{get all(){return new Proxy(e[0]?.dataset??{},Ee)},set(r={}){if(!e.is.empty&&u(r,Object))for(let[n,i]of Object.entries(r))e.setData({[n]:i});return e},get(r,n){return e.data.all[r]??n},add(r={}){if(!e.is.empty&&u(r,Object))for(let[n,i]of Object.entries(r))e.setData({[n]:i});return e},remove(r){return e[0]?.removeAttribute(`data-${N(r)}`),e}}},dimensions(e){if(e.is.empty)return w.error("[JQx instance].dimensions called on empty instance"),{error:"[JQx instance].dimensions: NO ELEMENTS"};let{node:r}=e,n=r.getBoundingClientRect().toJSON();return n.scrollTopDistance=B(r,0),n.scrollLeftDistance=B(r,0,!1),n},node(e){return e[0]},HTML(e){return{get(r,n){if(e.is.empty)return"NO ELEMENTS IN COLLECTION";let i=r?e.outerHtml:e.html();return n?H(i):i},set(r,n=!1,i=!1){r=r.isJQx?r.HTML.get(1):r;let a=u(r,String);return r=a&&i?H(r):r,a&&(r||"").trim().length&&e.html(r,n),e},replace(r,n=!1){return e.HTML.set(r,!1,n)},append(r,n=!1){return r=u(r,HTMLElement)?t(r).HTML.get(1):r.isJQx?r.HTML.get(1):r,e.HTML.set(r,!0,n)},insert(r,n=!1){return r=u(r,HTMLElement)?t(r).HTML.get(1):r.isJQx?r.HTML.get(1):r,e.HTML.set(r+e.HTML.get(),!1,n)}}},is(e){return Ut(e)},length(e){return e.collection.length},outerHtml(e){return(e.first()||{outerHTML:void 0}).outerHTML},parent(e){let r=t(e[0]?.parentNode);return r.is.empty?e:r},render(e){switch(!0){case!e.is.empty:return e.toDOM();default:return t.logger.warn("[JQx.render]: empty collection"),e}},Style(e){return{get computed(){return e.is.empty?{}:getComputedStyle(e[0])},inline(r){return e.style(r)},inSheet(r){return e.css(r)},valueOf(r){return e.is.empty?void 0:getComputedStyle(e[0])[N(r)]},nwRule(r){return e.Style.byRule({rules:r})},byRule({classes2Apply:r=[],rules:n=[]}={}){let a=u(n,String)&&!r.length?n.split("{")[0].trim():"";if(n=n&&u(n,String)?[n]:n,r=r&&u(r,String)?[r]:r,(n?.length||r?.length)&&(n?.length&&t.editCssRules(...n),r))for(let f of r)e.addClass(f);return a?.startsWith(".")&&e.addClass(a.slice(1)),a?.startsWith("#")&&!e.attr("id")&&e.prop({id:a.slice(1)}),e}}}}}function Gt(t){return{addClass(e,...r){return E(e,n=>n&&r.forEach(i=>n.classList.add(i)))},after:ae,afterMe:ae,andThen(e,r,n=!1){if(!r||!u(r,String,Node,Proxy))return w.log("[JQx instance].[before(Me) | after(Me) | andThen]: invalid/-sufficient input."),e;r=r?.isJQx?r:u(r,Node)?t.virtual(r):t.virtual(C(r));let[i,a,f]=n?[0,"before",r.collection.concat(e.collection)]:[e.collection.length-1,"after",e.collection.concat(r.collection)];return e[i][a](...r.collection),e.collection=f,e},append(e,...r){if(e.is.empty||r.length<1)return e;let n=e.length===1;for(let i of r){if(!i.isJQx&&T(i)){let a=i.trim(),S=!/^<(.+)[^>]+>$/m.test(a)?t.text(i):C(i);E(e,y=>y.append(n?S:M(S)))}O(i)&&E(e,a=>a.append(n?i:M(i))),i.isJQx&&!i.is.empty&&E(e,a=>i.collection.forEach(f=>a.append(n?f:M(f))))}return e},appendTo(e,r){switch(!0){case(!r.isJQx&&!u(r,HTMLElement)):return $.warn("[JQx instance].appendTo: invalid input"),e;default:return(r.isJQx?r:t(r)).append(e),e}},attr(e,r,n){if(!e.node||u(e.node,Text,Comment))return e;if(!n&&T(r))return r=N(r),r==="class"?[...e.node.classList].join(" "):e.node.getAttribute(r);if(T(r)&&n)switch(r=N(r),!0){case r.startsWith("data-"):r={data:{[r.replace("data-","")]:n}};break;default:r={[r]:n}}return u(r,Object)&&!e.is.empty&&Le(e.node,r),e},before:le,beforeMe:le,clear(e){return E(e,oe)},closest(e,r){let n=T(r)?e.node?.closest(r):void 0;return n?t(n):e},computedStyle(e,r){let{node:n}=e;return n&&getComputedStyle(n)[r]},css(e,r,n){return E(e,i=>Ke(i,r,n,t))},duplicate(e,r=!1,n=document.body){switch(!0){case e.is.empty:return w.error("Duplicating an empty JQx instance is not possible"),e;default:let i=e.collection[0].cloneNode(!0);return i.childNodes.forEach(a=>{a.removeAttribute&&a?.removeAttribute("id")}),r?t(i).toDOM(n):t.virtual(i)}},each(e,r){return E(e,r)},empty(e){return E(e,oe)},find(e,r){return e.collection.length>0?[...e.first()?.querySelectorAll(r)]:[]},find$(e,r){return e.collection.length>0?t(r,e):e},first(e,r=!1){return e.collection.length>0?r?e.single():e.collection[0]:void 0},first$(e,r){return e.single(r)},getData(e,r,n){return e.node?.dataset?.[r]||n},hasClass(e,...r){return e.is.empty||!e.node.classList.length?!1:r.find(n=>e.node.classList.contains(n))&&!0||!1},hide(e){return E(e,r=>W(r,{display:"none !important"}))},html(e,r,n){switch(!0){case(e.is.empty&&!T(r)):return"";case!T(r):return e.node?.getHTML()??"";default:let i=C(`<div>${r.isJQx?r.HTML.get(!0):r}</div>`);return E(e,f=>(f.textContent=n?f.textContent:"",f.insertAdjacentHTML(t.at.end,i.getHTML())))}},htmlFor(e,r,n="",i=!1){if(e.is.empty||!T(r)||!T(n))return e;let a=e.find$(r);if(a.length<1)return e;let f=C(`<span>${n}</span>`);return a.each(S=>{i||(S.textContent=""),S.insertAdjacentHTML(t.at.end,f?.getHTML())}),e},isEmpty(e){return!e.node},nth$(e,r){return e.single(r)},on(e,r,...n){switch(!0){case(e.is.empty||!u(r,String,Array)||!T(r)||n.length<1):return e;default:return t.handle({type:r,node:e.node,handler:n}),e}},once(e,r,...n){switch(!0){case(e.is.empty||!u(r,String,Array)||!T(r)||n.length<1):return e;default:return t.handle({type:r,once:!0,node:e.node,handler:n}),e}},prepend(e,...r){if(e.is.empty||!r)return;let n=e.length===1;for(let i of r){if(T(i)){i=i.trim();let f=!/^<(.+)[^>]+>$/m.test(i)?t.text(i):C(i);f=n?f:M(f),E(e,S=>S.prepend(f.cloneNode(!0)))}O(i)&&E(e,a=>a.prepend(n?i:M(i))),i.isJQx&&!i.is.empty&&(i.collection.length>1&&i.collection.reverse(),E(e,a=>E(i,f=>a.prepend(n?f:M(f)))),i.collection.reverse())}return e},prependTo(e,r){return r.isJQx||(r=t.virtual(r)),r.prepend(e),e},prop(e,r,n){if(u(r,String)&&!n)return r.startsWith("data")?e[0]?.dataset[r.slice(r.indexOf("-")+1)]:e[0]?.[r];let i=u(r,Object)?r:{[r]:n};for(let[a,f]of Object.entries(i)){if(a=a.trim(),f&&!ne(a)||!f)return!1;if(a.toLowerCase()==="id")return e[0].id=f;E(e,y=>{if(a.startsWith("data"))return y.dataset[a.slice(a.indexOf("-")+1)]=f;y[a]=f})}return e},remove(e,r){let n=a=>a.remove(),i=()=>e.collection=e.collection.filter(a=>document.documentElement.contains(a));if(r){let a=e.find$(r);return a.is.empty||(E(a,n),i()),e}return E(e,n),i(),e},rmAttr(e,...r){for(let n of r)e.node.removeAttribute(n);return e},removeClass(e,...r){return E(e,n=>{if(n)for(let i of r)n.classList.remove(i)})},renderTo(e,r,n){return r=u(r,HTMLElement)||r.isJQx?r:document.body,n=u(n,String)&&t.at[n]?n:t.at.end,e.first$().toDOM(r,n),e},replace(e,r,n){let i=e.node;return!r||!u(n,HTMLElement)&&!n?.isJQx?(t.logger.error("JQx replace: invalid replacement value"),e):((n.isJQx||u(n,NodeList))&&(n=n[0]),i&&r&&(r=u(r,String)?i.querySelectorAll(r):r.isJQx?r.collection:r,u(r,HTMLElement,NodeList,Array)&&u(n,HTMLElement)&&(u(r,HTMLElement)?[r]:[...r]).forEach(a=>a.replaceWith(n.cloneNode(!0)))),e)},replaceClass(e,r,...n){return E(e,i=>{i.classList.remove(r);for(let a of n)i.classList.add(a)})},replaceMe(e,r){return e.replaceWith(r)},replaceWith(e,r){return r=u(r,Element)?r:r.isJQx?r[0]:void 0,r&&(e[0].replaceWith(r),e=t.virtual(r)),e},setData(e,r){return E(e,n=>ie(n,r))},show(e){return E(e,r=>W(r,{display:"revert-layer !important"}))},single(e,r){let n=e.collection.length>0;switch(r=r??0,!0){case(n&&u(r,String)):return e.find$(r);case(n&&u(r,Number)):return t(e.collection[r]);case n:return e.collection[0];default:return e}},style(e,r,n){return E(e,a=>{n&&u(r,String)&&(r={[r]:n||"none"}),W(a,r)})},text(e,r,n=!1){switch(!0){case e.isEmpty():return e;case!u(r,String):return e.node.textContent;default:return E(e,i=>i.textContent=n?i.textContent+r:r)}},toDOM(e,r=document.body,n=L.BeforeEnd){return e.isVirtual=!1,D(e.collection,r,n),e},toggleClass(e,r){return E(e,n=>n.classList.toggle(r))},toNodeList(e){return[...e.collection].map(r=>document.importNode(r,!0))},trigger(e,r,n,i){n=u(n,Function)?n:Event,i=u(i,Object)?{...i,bubbles:i.bubbles??!0}:{bubbles:!0};let a=new n(r,i);return e.is.empty||e.each(f=>f.dispatchEvent(a)),e},val(e,r){switch(!0){case(e.is.empty||!u(e.node,HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement)):return e;case!u(r,String):return e.node.value;default:return e.node.value=u(r,String)?r:"",e}}}}var $e,de,{isComment:tn,isText:rn,isHtmlString:nn,isArrayOfHtmlElements:on,isArrayOfHtmlStrings:sn,ElemArray2HtmlString:an,cssRuleEdit:Pe,addFn:Zt}=Kt();function Kt(){return{...Ge(),addFn:qt}}function qt(t,e){return t=t?.trim(),!T(t)||!u(e,Function)?w.error("JQx.fn: method invalid parameter(s)"):de[t]=(r,...n)=>e(r,...n)}function er(t){return function(e,r,n){if(e=e?.trim(),!T(e)||!u(r,Function))return t.error("JQx.staticFn: invalid parameter(s)");let i=n?{get(){return r()}}:{value(...a){return r(...a)}};try{Object.defineProperty(t,e,i)}catch{return t.warn(`JQx.staticFn: extension [${e}] already exists`)}return w.log(`JQx: added static extension function [${e}]`)}}function V(t){return new Proxy(t,Object.freeze({get:(e,r)=>tr(e,r,t)}))}function et(t,e){return(...r)=>u(t,Function)&&t(V(e),...r)}function tr(t,e,r){switch(!0){case u(e,Symbol):return A({trial:()=>t[e],whenError:()=>t});case u(+e,Number):return t.collection?.[e]||void 0;case e in $e:return et($e[e],r)();case e in de:return et(de[e],r);default:return t[e]}}function nt(t){let e=sr(t);for(let[r,n]of Object.entries(Object.getOwnPropertyDescriptors(e)))Object.defineProperty(t,r,n);return t}function rr(t){return{allow(e){let r=/-/.test(e),n=r&&e;e=r?z(e):e.toLowerCase(),P.allowTag(e),Object.defineProperties(t,Oe(e,!0,t,n))},prohibit(e){e=e.toLowerCase(),P.prohibitTag(e),Object.defineProperties(t,Oe(e,!1,t))}}}function tt(...t){if(t.length===1){let e=String(t.shift().trim());t=e.startsWith("!")?[e.slice(1,-1)]:e.split(",").map(r=>r.trim())}for(let e of t.map(r=>r.startsWith("!")?r.slice(1,-1):r))Pe(e,{removeRule:1})}function nr(t){return function(e,r,n){r=r?.isJQx?r?.[0]:r,n=n&&Object.values(L).find(a=>n===a);let i=t(e,document.createElement("br"));if(r&&!u(r,HTMLBRElement))for(let a of i.collection)n?r.insertAdjacentElement(n,a):r.append(a);return i}}function or(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);for(let[i,a]of Object.entries(n))!(i in e)&&Object.defineProperty(e,i,{...a,enumerable:!1})}return e}function ir(t,e,r,n){return t=N(n||t.toLowerCase()),{get(){return(...i)=>{let a=e&&r.virtual(I(U[t](...i)))||void 0,S=!u(a?.node,Comment,Text,void 0)?Te(a):"";return w.log(e?`JQx: created (virtual) instance from [JQx].${t} ${S}`:`JQx: ${t.toUpperCase()} is prohibited. Use [JQx].allowTag if necessary.`),a}},enumerable:!1,configurable:!0}}function Oe(t,e,r,n){t=t.toLowerCase();let i=ir(t,e,r,n);return n?{[n]:i,[z(n)]:i}:{[t]:i,[t.toUpperCase()]:i}}function sr(t){return or(Object.entries(P.tagsRaw).reduce(ar(t),{}),mr(t))}function ar(t){return function(e,[r,n]){return Object.defineProperties(e,Oe(r,n,t)),e}}function lr(t){return function(e,r,...n){u(r,Function)&&(n.push(r),r=void 0),t({type:e,selector:r,handlers:n})}}function ur(t){return function(e){let{type:r,types:n,origin:i,selector:a,handler:f,handlers:S,node:y,name:x,capture:d,once:b,about:m}=e;f=S||f,r=n||r,a=i||a;let h=Ce(r),g=x;f=u(f,Function)?[f]:f;let c={type:h,selector:a||i,capture:d,name:g,once:b,node:y,about:m};switch(!0){case(u(h,Array)&&h.length>0):for(let o of h)c.type=o,rt(f,c,t);break;default:return rt(f,c,t)}}}function rt(t,e,r){for(let n of t)r.listen({...e,handler:n})}function cr(t){return function(e,r){return r=T(r)&&r,e=T(e)&&e,r&&e&&t.listenerStore[e][r]}}function fr(t){return t.activePopup||Object.defineProperty(t,"activePopup",{value:K(t),enumerable:!1}),t.activePopup}function dr(t){let e=(d,b)=>Pe(d,b),r=function(d){return Q({createWithId:d||`jqx${ue()}`})},n=function(...d){for(let b of d)Pe(b)},i=rr(t),a=q(t),f=ur(a);return{editCssRule:e,createStyle:r,editCssRules:n,allowProhibit:i,handle:f,capturedHandling:f,log:(...d)=>w.on.log(...d).off,warn:(...d)=>w.on.warn(...d).off,error:(...d)=>w.on.error(...d).off,handlerWrapper:a}}function mr(t){let{factoryExtensions:e,instanceExtensions:r}=qe(t);$e=e,de=r;let{editCssRule:n,createStyle:i,editCssRules:a,allowProhibit:f,handle:S,capturedHandling:y,log:x,warn:d,error:b,handlerWrapper:m}=dr(t),h=cr(t),g=er(t);return{log:x,warn:d,error:b,editCssRules:a,createStyle:i,editStylesheet:i,editCssRule:n,escHtml:H,logger:w,text(c,o=!1){return o?t.comment(c):document.createTextNode(c)},node(c,o=document){return o.querySelector(c,o)},nodes(c,o=document){return[...o.querySelectorAll(c,o)]},clearAllTimers:we,get staticFn(){return function(c,o,s){return g(c,o,s)}},get toBool(){return Ne},get getNamedListener(){return h},get virtual(){return nr(t)},get allowTag(){return f.allow},get prohibitTag(){return f.prohibit},get removeCssRule(){return tt},get removeCssRules(){return tt},get delegate(){return lr(y)},get delegateCaptured(){return y},get handle(){return y},get listen(){return m.listen},get at(){return L},get setStyle(){return n},get fn(){return Zt},get lenient(){return P.allowUnknownHtmlTags},get IS(){return u},get Popup(){return fr(t)},get listenerStore(){return m.ListenerStore}}}var ot=nt(gr());function gr(){return function(e,r,n=L.BeforeEnd){if(e?.isJQx)return e;let i=u(r,HTMLBRElement);r=(!i&&r&&r.isJQx?r[0]:r)||document.body,n=n&&Object.values(L).find(d=>n===d)?n:void 0;let a=Y(e),S=!a&&fe(e)||a,y={collection:se(e)??[],isVirtual:i,isJQx:!0},x=_(y.collection);if(y.collection.length&&x)return i||y.collection.forEach(d=>{r.contains(d)||D([d],r,n)}),V(y);if(S){if([e].flat().forEach(d=>y.collection.push(C(d))),y.collection.length>0){let d=y.collection.filter(g=>g?.dataset?.jqxcreationerror);y.collection=y.collection.filter(g=>!g?.dataset?.jqxcreationerror);let m=y.collection.map(g=>`${String(g.constructor).split(/function|\(/)[1].trim()}`).length>1;y=V(y);let h=y.collection.length>0?Xe(y):"sanitized: no elements remaining";w.log(`JQx: created ${y.isVirtual?"(virtual)":""} instance from ${m?"array of ":""}HTML string${m?"s":""} ${h}`),y.isVirtual||D(y.collection,r,n)}return y}return Ae(e,r,y),V(y)}}var mn=ot;export{mn as default};
